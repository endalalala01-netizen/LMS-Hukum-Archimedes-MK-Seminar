<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS Hukum Archimedes - Untuk Siswa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --info-color: #0dcaf0;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --water-color: #00a8ff;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --university-blue: #003d7a;
            --university-gold: #ffd700;
            --student-blue: #3498db;
            --student-green: #2ecc71;
            --student-orange: #f39c12;
            --student-purple: #9b59b6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Splash Screen dengan background sekolah */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://z-cdn-media.chatglm.cn/files/b6b4e3fe-52e6-4cac-86b9-5fb1f5fe5f7f_pasted_image_1760154365427.png?auth_key=1791690381-fed780fd53ba4df8b08c01ebb6bb2042-0-2742e63e26b10e0915cbe5d47a2500ba') no-repeat center center;
            background-size: cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 1s ease, visibility 1s ease;
            overflow: hidden;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .splash-screen::-webkit-scrollbar {
            display: none;
        }
        
        .splash-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 20, 40, 0.6);
        }
        
        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .splash-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: white;
            max-width: 800px;
            padding: 20px;
            max-height: 90vh;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .splash-content::-webkit-scrollbar {
            display: none;
        }
        
        .university-logo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: pulse 2s infinite;
        }
        
        .university-logo i {
            font-size: 80px;
            color: var(--university-blue);
        }
        
        .splash-title {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            animation: fadeInUp 1s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .splash-subtitle {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInUp 1s ease 0.3s;
            animation-fill-mode: both;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .developers {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 50px;
            backdrop-filter: blur(5px);
            animation: fadeInUp 1s ease 0.6s;
            animation-fill-mode: both;
        }
        
        .developers h3 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .developers p {
            color: rgba(255, 255, 255, 0.9);
            margin: 5px 0;
            text-align: center;
        }
        
        .start-button {
            background: var(--university-gold);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--university-blue);
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease 0.9s;
            animation-fill-mode: both;
            cursor: pointer;
        }
        
        .start-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }
        
        /* Login Container */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
            opacity: 0;
            visibility: hidden;
        }
        
        .login-container.show {
            opacity: 1;
            visibility: visible;
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            padding: 40px;
            width: 100%;
            max-width: 450px;
            animation: fadeInUp 0.8s ease;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header i {
            font-size: 4rem;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }
        
        .login-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 10px;
        }
        
        .login-header p {
            color: var(--secondary-color);
            margin-bottom: 0;
        }
        
        .form-floating {
            margin-bottom: 20px;
        }
        
        .form-control {
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        
        .btn-login {
            background: var(--gradient-3);
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-weight: 600;
            color: white;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }
        
        .btn-login:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        /* Animated Background - untuk di dalam LMS */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: url('https://z-cdn-media.chatglm.cn/files/86d5a5be-0f34-4e98-9525-8690f800ff43_maxresdefault.jpg?auth_key=1791643388-198bffaf5f8947ccbb989a1da03f7e97-0-1aeba5022886bfb071201c5d62d71d94') no-repeat center center;
            background-size: cover;
        }
        
        .animated-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 20, 40, 0.7);
        }
        
        /* Animated bubbles */
        .animated-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="80" r="5" fill="rgba(255,255,255,0.3)"><animate attributeName="cy" from="100" to="-10" dur="8s" repeatCount="indefinite"/></circle><circle cx="50" cy="70" r="3" fill="rgba(255,255,255,0.2)"><animate attributeName="cy" from="100" to="-10" dur="6s" repeatCount="indefinite"/></circle><circle cx="80" cy="90" r="4" fill="rgba(255,255,255,0.3)"><animate attributeName="cy" from="100" to="-10" dur="7s" repeatCount="indefinite"/></circle><circle cx="35" cy="60" r="2" fill="rgba(255,255,255,0.2)"><animate attributeName="cy" from="100" to="-10" dur="5s" repeatCount="indefinite"/></circle><circle cx="65" cy="85" r="3" fill="rgba(255,255,255,0.3)"><animate attributeName="cy" from="100" to="-10" dur="9s" repeatCount="indefinite"/></circle></svg>') no-repeat;
            background-size: cover;
            opacity: 0.8;
            pointer-events: none;
        }
        
        /* Sidebar Menu */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .sidebar-header {
            padding: 30px 20px;
            background: var(--gradient-1);
            color: white;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .sidebar-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .user-avatar i {
            font-size: 24px;
            color: var(--primary-color);
        }
        
        .user-info h5 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .user-info p {
            margin: 0;
            font-size: 14px;
            opacity: 0.9;
        }
        
        .sidebar-menu {
            padding: 20px 0;
            flex-grow: 1;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f1f1f1;
        }
        
        .sidebar-menu::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar-menu::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .sidebar-menu::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .sidebar-menu::-webkit-scrollbar-thumb:hover {
            background: #0b5ed7;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: var(--dark-color);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .menu-item:hover::before,
        .menu-item.active::before {
            transform: translateX(0);
        }
        
        .menu-item:hover {
            background: rgba(13, 110, 253, 0.1);
            color: var(--primary-color);
        }
        
        .menu-item.active {
            background: rgba(13, 110, 253, 0.1);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .menu-item i {
            font-size: 20px;
            margin-right: 15px;
            width: 25px;
            text-align: center;
        }
        
        .logout-item {
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding-top: 20px;
            flex-shrink: 0;
            position: sticky;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            z-index: 10;
        }
        
        .logout-item .menu-item {
            color: var(--danger-color);
        }
        
        .logout-item .menu-item:hover {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-color);
        }
        
        .logout-item .menu-item::before {
            background: var(--danger-color);
        }
        
        /* Toggle Button */
        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
        }
        
        .menu-toggle:hover {
            transform: scale(1.1);
        }
        
        .menu-toggle.active {
            left: 300px;
        }
        
        /* Sound Toggle Button */
        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
        }
        
        .sound-toggle:hover {
            transform: scale(1.1);
        }
        
        .sound-toggle.active {
            background: var(--success-color);
            color: white;
        }
        
        .sound-toggle i {
            font-size: 24px;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 0;
            padding: 80px 20px 20px;
            transition: margin-left 0.3s ease;
            min-height: 100vh;
        }
        
        .main-content.shifted {
            margin-left: 280px;
        }
        
        /* Page Sections */
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        /* Hero Section */
        .hero-section {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            color: var(--dark-color);
            padding: 80px 0;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-3);
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            animation: fadeInUp 1s ease;
            color: var(--primary-color);
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease 0.2s;
            animation-fill-mode: both;
            color: var(--secondary-color);
        }
        
        .welcome-message {
            background: rgba(13, 110, 253, 0.1);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(5px);
            animation: fadeInUp 1s ease 0.4s;
            animation-fill-mode: both;
        }
        
        .hero-image {
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }
        
        .hero-image i {
            font-size: 10rem;
            opacity: 0.9;
            color: var(--info-color);
        }
        
        /* Menu Cards */
        .menu-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-3);
        }
        
        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .menu-card.tujuan::before {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }
        
        .menu-card.petunjuk::before {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }
        
        .menu-card.materi::before {
            background: var(--gradient-1);
        }
        
        .menu-card.simulasi::before {
            background: var(--gradient-2);
        }
        
        .menu-card.contoh::before {
            background: var(--gradient-3);
        }
        
        .menu-card.kuis::before {
            background: var(--gradient-4);
        }
        
        .menu-card.selesai::before {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        }
        
        .menu-card.profil::before {
            background: linear-gradient(135deg, #8360c3, #2ebf91);
        }
        
        .menu-card.guru::before {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .menu-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 3rem;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .menu-card:hover .menu-icon {
            transform: scale(1.1);
        }
        
        .menu-icon.tujuan {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }
        
        .menu-icon.petunjuk {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }
        
        .menu-icon.materi {
            background: var(--gradient-1);
        }
        
        .menu-icon.simulasi {
            background: var(--gradient-2);
        }
        
        .menu-icon.contoh {
            background: var(--gradient-3);
        }
        
        .menu-icon.kuis {
            background: var(--gradient-4);
        }
        
        .menu-icon.selesai {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        }
        
        .menu-icon.profil {
            background: linear-gradient(135deg, #8360c3, #2ebf91);
        }
        
        .menu-icon.guru {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .menu-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .menu-card p {
            color: var(--secondary-color);
            margin-bottom: 0;
            flex-grow: 1;
        }
        
        /* Section Cards */
        .section-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 40px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-3);
        }
        
        .section-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .section-title {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 2rem;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            animation: fadeIn 1s ease;
        }
        
        .section-title i {
            margin-right: 15px;
            font-size: 2.5rem;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Formula Box */
        .formula-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
            margin: 20px 0;
            font-size: 1.3rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary-color);
            animation: slideInLeft 1s ease;
        }
        
        /* Example Card */
        .example-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--info-color);
            transition: all 0.3s ease;
        }
        
        .example-card:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Simulation Styles */
        .simulation-container {
            background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            height: 400px;
            overflow: hidden;
            box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        #waterCanvas2, #waterCanvas3 {
            width: 100%;
            height: 300px;
            border-radius: 15px;
            background: linear-gradient(to bottom, #87ceeb, #006994);
            position: relative;
        }
        
        .control-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-label {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .slider-label i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .form-range {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            outline: none;
        }
        
        .form-range::-webkit-slider-thumb {
            width: 20px;
            height: 20px;
            background: var(--gradient-3);
            border-radius: 50%;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .form-range::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        .state-indicator {
            padding: 15px 25px;
            border-radius: 30px;
            font-weight: 600;
            text-align: center;
            margin-top: 20px;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .floating {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .suspending {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .sinking {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* State explanation box */
        .state-explanation {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .state-explanation h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .state-explanation h5 i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .state-explanation p {
            margin-bottom: 0;
            color: var(--secondary-color);
            line-height: 1.6;
        }
        
        /* PBL Tabs */
        .pbl-tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
        }
        
        .pbl-tab {
            padding: 12px 20px;
            cursor: pointer;
            background: #f8f9fa;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 10px 10px 0 0;
            margin-right: 5px;
            margin-bottom: -2px;
            font-weight: 600;
            color: var(--secondary-color);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .pbl-tab:hover {
            background: #e9ecef;
            color: var(--primary-color);
        }
        
        .pbl-tab.active {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            color: var(--primary-color);
            border-color: #dee2e6 #dee2e6 white #dee2e6;
        }
        
        .pbl-tab i {
            margin-right: 8px;
        }
        
        .pbl-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .pbl-content.active {
            display: block;
        }
        
        .pbl-step {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary-color);
        }
        
        .pbl-step-title {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .pbl-step-title i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .pbl-step-content {
            margin-bottom: 20px;
        }
        
        .pbl-step-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .pbl-step-content ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .pbl-step-content li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .pbl-action {
            margin-top: 20px;
            text-align: center;
        }
        
        .pbl-action button {
            background: var(--gradient-3);
            border: none;
            border-radius: 30px;
            padding: 10px 25px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }
        
        .pbl-action button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        .pbl-note {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--warning-color);
        }
        
        .pbl-note h5 {
            color: var(--warning-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .pbl-note h5 i {
            margin-right: 10px;
        }
        
        /* Quiz Styles */
        .game-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }
        
        .quiz-option {
            padding: 18px 25px;
            margin: 12px 0;
            border-radius: 15px;
            background: white;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-3);
            transition: left 0.3s ease;
            z-index: -1;
        }
        
        .quiz-option:hover::before {
            left: 0;
        }
        
        .quiz-option:hover {
            transform: translateX(10px);
            border-color: var(--primary-color);
            color: white;
        }
        
        .quiz-option.selected {
            background: #e7f5ff;
            border-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .quiz-option.correct {
            background: linear-gradient(135deg, #d1e7dd, #c3e6cb);
            border-color: var(--success-color);
            color: var(--success-color);
            animation: bounceIn 0.5s ease;
        }
        
        .quiz-option.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border-color: var(--danger-color);
            color: var(--danger-color);
            animation: shake 0.5s ease;
        }
        
        /* Progress Bar */
        .progress {
            height: 30px;
            border-radius: 15px;
            background: #e9ecef;
            overflow: visible;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar {
            background: var(--gradient-3);
            border-radius: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: width 0.6s ease;
            position: relative;
            overflow: visible;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 0 15px 15px 0;
        }
        
        /* Score Display */
        .score-display {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(13, 110, 253, 0.3);
        }
        
        /* Achievement Badge */
        .achievement-badge {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 20px;
            background: var(--gradient-2);
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: rotateIn 1s ease;
        }
        
        /* Buttons */
        .btn-primary {
            background: var(--gradient-3);
            border: none;
            border-radius: 30px;
            padding: 12px 30px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        .btn-outline-success,
        .btn-outline-warning,
        .btn-outline-danger {
            border: 2px solid;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-outline-success:hover,
        .btn-outline-warning:hover,
        .btn-outline-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Game Canvas */
        #gameCanvas {
            border: 1px solid #dee2e6;
            border-radius: 15px;
            background: white;
        }
        
        /* Game Navigation Buttons */
        .game-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .game-nav-btn {
            background: var(--gradient-3);
            border: none;
            border-radius: 30px;
            padding: 12px 30px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .game-nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        .game-nav-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .game-nav-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        /* Game Result Card */
        .game-result-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            text-align: center;
            display: none;
        }
        
        .game-result-card.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .game-result-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .game-result-score {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }
        
        .game-result-message {
            font-size: 1.2rem;
            color: var(--secondary-color);
            margin-bottom: 30px;
        }
        
        /* Developer Card */
        .developer-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .developer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }
        
        .developer-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--gradient-3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }
        
        .developer-avatar i {
            font-size: 48px;
            color: white;
        }
        
        .developer-info h3 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .developer-info p {
            color: var(--secondary-color);
            margin-bottom: 5px;
        }
        
        .developer-contact {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .developer-contact a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: all 0.3s ease;
        }
        
        .developer-contact a:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }
        
        /* Team Section */
        .team-section {
            margin-bottom: 40px;
        }
        
        .team-title {
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .team-description {
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        /* Project Info */
        .project-info {
            margin-top: 40px;
        }
        
        .project-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .project-title i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .project-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .project-item {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .project-item h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .project-item h5 i {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .project-item p {
            color: var(--secondary-color);
            margin: 0;
        }
        
        /* Acknowledgment */
        .acknowledgment {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .acknowledgment h3 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .acknowledgment p {
            color: var(--secondary-color);
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        /* Instruction Card */
        .instruction-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary-color);
        }
        
        .instruction-title {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .instruction-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-3);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .instruction-content {
            padding-left: 55px;
        }
        
        /* Tip Box */
        .tip-box {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--info-color);
        }
        
        .tip-box h5 {
            color: var(--info-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .tip-box h5 i {
            margin-right: 10px;
        }
        
        /* Note Box */
        .note-box {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--warning-color);
        }
        
        .note-box h5 {
            color: var(--warning-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .note-box h5 i {
            margin-right: 10px;
        }
        
        /* Parameter Table */
        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .parameter-table th,
        .parameter-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .parameter-table th {
            background: var(--gradient-3);
            color: white;
            font-weight: 600;
        }
        
        .parameter-table tr:last-child td {
            border-bottom: none;
        }
        
        .parameter-table tr:hover {
            background: rgba(13, 110, 253, 0.05);
        }
        
        /* Student Input Box */
        .student-input-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary-color);
        }
        
        .student-input-title {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .student-input-title i {
            margin-right: 10px;
        }
        
        .student-input-area {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
            transition: all 0.3s ease;
        }
        
        .student-input-area:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        
        .student-input-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .student-input-hint {
            color: var(--secondary-color);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        
        .student-input-hint i {
            margin-right: 5px;
        }
        
        /* Selesai Container */
        .selesai-container {
            text-align: center;
            padding: 40px;
        }
        
        .selesai-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--gradient-4);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        
        .selesai-icon i {
            font-size: 60px;
            color: white;
        }
        
        .selesai-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .selesai-message {
            font-size: 1.2rem;
            color: var(--secondary-color);
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .selesai-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        /* Video Container */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin: 20px 0;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 15px;
        }
        
        .video-description {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--primary-color);
        }
        
        .video-description h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .video-description h5 i {
            margin-right: 10px;
        }
        
        /* Teacher Dashboard Styles */
        .teacher-dashboard {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .dashboard-title {
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .dashboard-title i {
            margin-right: 15px;
            font-size: 2.5rem;
        }
        
        .dashboard-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            flex: 1;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        .student-answers-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .student-answers-table th,
        .student-answers-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .student-answers-table th {
            background: var(--gradient-3);
            color: white;
            font-weight: 600;
        }
        
        .student-answers-table tr:last-child td {
            border-bottom: none;
        }
        
        .student-answers-table tr:hover {
            background: rgba(13, 110, 253, 0.05);
        }
        
        .answer-preview {
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .answer-preview:hover {
            white-space: normal;
            word-wrap: break-word;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .export-btn {
            background: var(--gradient-3);
            border: none;
            border-radius: 30px;
            padding: 10px 25px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .export-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        .export-btn.csv {
            background: var(--gradient-4);
        }
        
        .export-btn.json {
            background: var(--gradient-2);
        }
        
        .filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .filter-input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .filter-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        
        .filter-btn {
            background: var(--gradient-3);
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }
        
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(13, 110, 253, 0.4);
        }
        
        .no-data-message {
            text-align: center;
            padding: 40px;
            color: var(--secondary-color);
            font-size: 1.2rem;
        }
        
        .no-data-message i {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.4);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(13, 110, 253, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
            }
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-10px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(10px);
            }
        }
        
        @keyframes rotateIn {
            from {
                opacity: 0;
                transform: rotate(-200deg) scale(0.5);
            }
            to {
                opacity: 1;
                transform: rotate(0) scale(1);
            }
        }
        
        /* Water wave animation */
        .water-wave {
            position: absolute;
            left: 0;
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            opacity: 0.6;
            animation: wave 3s infinite linear;
        }
        
        @keyframes wave {
            0% {
                transform: translateX(-100%) translateY(0);
            }
            100% {
                transform: translateX(100%) translateY(0);
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                max-width: 300px;
            }
            
            .main-content.shifted {
                margin-left: 0;
            }
            
            .hero-title {
                font-size: 2rem;
            }
            
            .splash-title {
                font-size: 2rem;
            }
            
            .splash-subtitle {
                font-size: 1.2rem;
            }
            
            .section-card {
                padding: 25px;
            }
            
            .menu-card {
                padding: 25px;
            }
            
            .instruction-content {
                padding-left: 0;
                padding-top: 15px;
            }
            
            .parameter-table {
                font-size: 0.9rem;
            }
            
            .parameter-table th,
            .parameter-table td {
                padding: 10px;
            }
            
            .developer-card {
                flex-direction: column;
                text-align: center;
            }
            
            .developer-avatar {
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .developer-contact {
                justify-content: center;
            }
            
            .pbl-tabs {
                flex-direction: column;
            }
            
            .pbl-tab {
                margin-right: 0;
                margin-bottom: 5px;
                border-radius: 10px;
                border: 1px solid #dee2e6;
            }
            
            .student-input-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .selesai-actions {
                flex-direction: column;
            }
            
            .game-navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .dashboard-stats {
                flex-direction: column;
            }
            
            .export-buttons {
                flex-direction: column;
            }
            
            .filter-container {
                flex-direction: column;
            }
            
            .student-answers-table {
                font-size: 0.8rem;
            }
            
            .student-answers-table th,
            .student-answers-table td {
                padding: 10px 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background with Underwater Image - untuk di dalam LMS -->
    <div class="animated-bg"></div>
    
    <!-- Splash Screen dengan background sekolah -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="university-logo">
                <i class="bi bi-building"></i>
            </div>
            <h1 class="splash-title">UNIVERSITAS NEGERI MANADO</h1>
            <p class="splash-subtitle">LMS Interaktif Hukum Archimedes</p>
            <p class="splash-subtitle">Hukum Archimedes</p>
            
            <div class="developers">
                <h3>Di Buat oleh:</h3>
                <p>Bill Ryan Lucas         22505003</p>
                <p>Efraim Jonatan Lolowang 22505017</p>
            </div>
            
            <button class="start-button" id="startButton">
                <i class="bi bi-play-circle me-2"></i> Mulai
            </button>
        </div>
    </div>
    
    <!-- Login Container -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <div class="login-header">
                <i class="bi bi-water"></i>
                <h1>Hukum Archimedes</h1>
                <p>Media Pembelajaran Interaktif untuk Siswa</p>
                <p>.</p>
                <p>.</p>
                <p>.</p>
                <p>Di Buat Oleh :</p>
                <p>Bill Ryan Lucas           22505003</p>
                <p>Efraim Jonatan Lolowang   22505017</p>
                <p>Haii Semua. Bagaimana Kabar? Pokknya Semangatt, Jangan Mengeluh yahh</p>
                <p>Tuhan Memberkati!!!</p>
            </div>
            
            <form id="loginForm">
                <div class="form-floating">
                    <input type="text" class="form-control" id="username" placeholder="Username" required>
                    <label for="username">Username</label>
                </div>
                
                <button type="submit" class="btn-login">
                    <i class="bi bi-box-arrow-in-right me-2"></i> Masuk
                </button>
            </form>
        </div>
    </div>
    
    <!-- Sidebar Menu -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="user-profile">
                <div class="user-avatar">
                    <i class="bi bi-person-fill"></i>
                </div>
                <div class="user-info">
                    <h5 id="sidebarUsername">Loading...</h5>
                    <p id="userRole">Siswa Kelas X</p>
                </div>
            </div>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-item active" data-page="home">
                <i class="bi bi-house-door-fill"></i>
                <span>Beranda</span>
            </div>
            <div class="menu-item" data-page="tujuan">
                <i class="bi bi-bullseye"></i>
                <span>Tujuan Pembelajaran</span>
            </div>
            <div class="menu-item" data-page="materi">
                <i class="bi bi-book-fill"></i>
                <span>Materi</span>
            </div>
            <div class="menu-item" data-page="petunjuk">
                <i class="bi bi-clipboard-check"></i>
                <span>Petunjuk Percobaan</span>
            </div>
            <div class="menu-item" data-page="simulasi">
                <i class="bi bi-play-circle-fill"></i>
                <span>Tahapan Pembelajaran</span>
            </div>
            <div class="menu-item" data-page="contoh">
                <i class="bi bi-pencil-square"></i>
                <span>Contoh Soal</span>
            </div>
            <div class="menu-item" data-page="kuis">
                <i class="bi bi-controller"></i>
                <span>Kuis & Game</span>
            </div>
            <div class="menu-item" data-page="profil">
                <i class="bi bi-people-fill"></i>
                <span>Profil Pengembang</span>
            </div>
            <div class="menu-item" data-page="selesai">
                <i class="bi bi-flag-fill"></i>
                <span>Selesai</span>
            </div>
            <div class="menu-item" data-page="guru" id="guruMenuItem" style="display: none;">
                <i class="bi bi-person-badge-fill"></i>
                <span>Dashboard Guru</span>
            </div>
        </div>
        
        <div class="logout-item">
            <div class="menu-item" id="logoutBtn">
                <i class="bi bi-box-arrow-right"></i>
                <span>Keluar</span>
            </div>
        </div>
    </nav>
    
    <!-- Menu Toggle Button -->
    <div class="menu-toggle" id="menuToggle">
        <i class="bi bi-list" style="font-size: 24px; color: var(--primary-color);"></i>
    </div>
    
    <!-- Sound Toggle Button -->
    <div class="sound-toggle active" id="soundToggle" title="Aktifkan/Matikan Suara">
        <i class="bi bi-volume-up-fill"></i>
    </div>
    
    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Home Page -->
        <div class="page-section active" id="homePage">
            <!-- Hero Section -->
            <div class="hero-section" data-aos="fade-up">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <div class="hero-content">
                                <h1 class="hero-title">Hukum Archimedes</h1>
                                <p class="hero-subtitle">LMS untuk Pembelajaran Fisika</p>
                                <div class="welcome-message">
                                    <h4><i class="bi bi-person-circle me-2"></i> Selamat datang, <span id="welcomeUsername">Loading...</span>! 👋</h4>
                                </div>
                                <p class="lead">Ayo pelajari prinsip dasar gaya apung dengan cara yang seru! Kamu bisa melihat simulasi benda di dalam air, bermain game, dan menguji pengetahuanmu melalui kuis interaktif! 🚀</p>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="hero-image">
                                <i class="bi bi-water"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Menu Cards -->
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                        <div class="menu-card tujuan" onclick="showPage('tujuan')">
                            <div class="menu-icon tujuan">
                                <i class="bi bi-bullseye"></i>
                            </div>
                            <h3>Tujuan Pembelajaran</h3>
                            <p>Lihat apa yang akan kamu pelajari di simulasi ini dan target yang bisa kamu capai! 🎯</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                        <div class="menu-card materi" onclick="showPage('materi')">
                            <div class="menu-icon materi">
                                <i class="bi bi-book-fill"></i>
                            </div>
                            <h3>Materi</h3>
                            <p>Pelajari konsep dasar Hukum Archimedes dengan bahasa yang mudah dipahami dan contoh yang menarik! 📚</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                        <div class="menu-card petunjuk" onclick="showPage('petunjuk')">
                            <div class="menu-icon petunjuk">
                                <i class="bi bi-clipboard-check"></i>
                            </div>
                            <h3>Petunjuk Percobaan</h3>
                            <p>Panduan lengkap untuk menggunakan simulasi dengan langkah-langkah yang jelas dan mudah diikuti! 📝</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                        <div class="menu-card simulasi" onclick="showPage('simulasi')">
                            <div class="menu-icon simulasi">
                                <i class="bi bi-play-circle-fill"></i>
                            </div>
                            <h3>Tahapan Pembelajaran</h3>
                            <p>Tahapan Pembelajaran Discovery didalamnya terdapat simulasi, Yuk coba simulasi interaktif! Ubah-ubah parameter dan lihat apa yang terjadi pada benda di dalam air! 🌊</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="500">
                        <div class="menu-card contoh" onclick="showPage('contoh')">
                            <div class="menu-icon contoh">
                                <i class="bi bi-pencil-square"></i>
                            </div>
                            <h3>Contoh Soal</h3>
                            <p>Pelajari cara menyelesaikan soal-soal tentang Hukum Archimedes dengan penjelasan yang detail! ✏️</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="600">
                        <div class="menu-card kuis" onclick="showPage('kuis')">
                            <div class="menu-icon kuis">
                                <i class="bi bi-controller"></i>
                            </div>
                            <h3>Kuis & Game</h3>
                            <p>Uji pengetahuanmu dengan kuis seru dan game menantang tentang Hukum Archimedes! 🎮</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="700">
                        <div class="menu-card profil" onclick="showPage('profil')">
                            <div class="menu-icon profil">
                                <i class="bi bi-people-fill"></i>
                            </div>
                            <h3>Profil Pengembang</h3>
                            <p>Kenali tim yang membuat simulasi keren ini! 👨‍💻👩‍💻</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="800">
                        <div class="menu-card selesai" onclick="showPage('selesai')">
                            <div class="menu-icon selesai">
                                <i class="bi bi-flag-fill"></i>
                            </div>
                            <h3>Selesai</h3>
                            <p>Akhiri pembelajaranmu dan lihat hasil kesimpulan yang telah kamu kirim! 🏁</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Guru Dashboard Page -->
        <div class="page-section" id="guruPage">
            <div class="container">
                <div class="teacher-dashboard" data-aos="fade-up">
                    <div class="dashboard-header">
                        <h2 class="dashboard-title">
                            <i class="bi bi-person-badge-fill"></i>
                            Dashboard Guru
                        </h2>
                        <div class="export-buttons">
                            <button class="export-btn csv" id="exportCsvBtn">
                                <i class="bi bi-file-earmark-spreadsheet"></i>
                                Export CSV
                            </button>
                            <button class="export-btn json" id="exportJsonBtn">
                                <i class="bi bi-file-earmark-code"></i>
                                Export JSON
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-stats" data-aos="fade-up" data-aos-delay="100">
                        <div class="stat-card">
                            <div class="stat-number" id="totalStudents">0</div>
                            <div class="stat-label">Total Siswa</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completedStudents">0</div>
                            <div class="stat-label">Siswa Selesai</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="averageScore">0</div>
                            <div class="stat-label">Rata-rata Skor</div>
                        </div>
                    </div>
                    
                    <div class="filter-container" data-aos="fade-up" data-aos-delay="200">
                        <input type="text" class="filter-input" id="filterInput" placeholder="Cari berdasarkan nama siswa...">
                        <button class="filter-btn" id="filterBtn">
                            <i class="bi bi-search"></i> Cari
                        </button>
                        <button class="filter-btn" id="resetFilterBtn">
                            <i class="bi bi-arrow-clockwise"></i> Reset
                        </button>
                    </div>
                    
                    <div id="studentAnswersContainer">
                        <h3 class="mb-3">Jawaban Siswa</h3>
                        <div id="studentAnswersTableContainer">
                            <!-- Table will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profil Pengembang Page -->
        <div class="page-section" id="profilPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-people-fill"></i>
                        Profil Pengembang
                    </h2>
                    
                    <div class="team-section" data-aos="fade-up">
                        <h3 class="team-title">Kelompok 4</h3>
                        <h3 class="team-title">Pengembang Media Pembelajaran Fisika</h3>
                        <p class="team-description">Simulasi Keren Ini Dikembangkan Oleh Mahasiswa Universitas Negeri Manado Sebagai Bagian Dari Tugas Mata Kuliah Pengembangan Media Pembelajaran Fisika.</p>
                        
                        <div class="row">
                            <div class="col-md-6 mb-4" data-aos="fade-right">
                                <div class="developer-card">
                                    <div class="developer-avatar">
                                        <i class="bi bi-person-fill"></i>
                                    </div>
                                    <div class="developer-info">
                                        <h3>Bill Ryan Lucas</h3>
                                        <p><strong>NIM:</strong> 22505003</p>
                                        <p><strong>Program Studi:</strong> Pendidikan Fisika</p>
                                        <p><strong>Fakultas:</strong> Matematika Ilmu Pengetahuan Alam dan Kebumian</p>
                                        <p><strong>Universitas:</strong> UNIMA (Universitas Negeri Manado)</p>
                                        
                                        <div class="developer-contact">
                                            <a href="#" title="Email">
                                                <i class="bi bi-envelope-fill"></i>
                                            </a>
                                            <a href="#" title="Facebook">
                                                <i class="bi bi-facebook"></i>
                                            </a>
                                            <a href="#" title="Instagram">
                                                <i class="bi bi-instagram"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4" data-aos="fade-left">
                                <div class="developer-card">
                                    <div class="developer-avatar">
                                        <i class="bi bi-person-fill"></i>
                                    </div>
                                    <div class="developer-info">
                                        <h3>Efraim Jonatan Lolowang</h3>
                                        <p><strong>NIM:</strong> 22505017</p>
                                        <p><strong>Program Studi:</strong> Pendidikan Fisika</p>
                                        <p><strong>Fakultas:</strong> Matematika Ilmu Pengetahuan Alam dan Kebumian</p>
                                        <p><strong>Universitas:</strong> UNIMA (Universitas Negeri Manado)</p>
                                        
                                        <div class="developer-contact">
                                            <a href="#" title="Email">
                                                <i class="bi bi-envelope-fill"></i>
                                            </a>
                                            <a href="#" title="Facebook">
                                                <i class="bi bi-facebook"></i>
                                            </a>
                                            <a href="#" title="Instagram">
                                                <i class="bi bi-instagram"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="project-info" data-aos="fade-up">
                        <h3 class="project-title">
                            <i class="bi bi-info-circle-fill"></i>
                            Informasi Proyek
                        </h3>
                        
                        <div class="project-details">
                            <div class="project-item">
                                <h5><i class="bi bi-calendar-event"></i> Tahun Pembuatan</h5>
                                <p>2025</p>
                            </div>
                            
                            <div class="project-item">
                                <h5><i class="bi bi-book"></i> Mata Kuliah</h5>
                                <p>Pengembangan Media Pembelajaran Fisika</p>
                            </div>
                            
                            <div class="project-item">
                                <h5><i class="bi bi-tools"></i> Teknologi</h5>
                                <p>HTML, CSS, JavaScript, Bootstrap</p>
                            </div>
                            
                            <div class="project-item">
                                <h5><i class="bi bi-globe"></i> Lisensi</h5>
                                <p>Kelompok 4_ Bill R. L & Efraim J. L</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="acknowledgment" data-aos="fade-up">
                        <h3>Ucapan Terima Kasih</h3>
                        <p>Kami Mengucapkan Terima Kasih Kepada Dosen Pengampu Mata Kuliah Pengembangan Media Pembelajaran Fisika. Yaitu : </p>
                        <p>Prof. Dr Rolles N. Palilingan,.MS</p>
                        <p>Dra., Theresje Mandang,.M.Si</p>
                        <p>Liza Sepria Ahmad, S.Pd., M.Pd</p>
                        <p>Yang Telah Membimbing Dan Memberikan Arahan Pada Kami Kelompok 4. Kami Juga Berterima Kasih Kepada Tuhan Yang Telah Memberikan Kekuatan dan Kesehatan Dan Juga Keluarga Yang Telah Memberikan Doa Dan Semangat Dalam Menyelesaikan Proyek Ini.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tujuan Pembelajaran Page -->
        <div class="page-section" id="tujuanPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-bullseye"></i>
                        Tujuan Pembelajaran
                    </h2>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4" data-aos="fade-right">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center p-4">
                                    <div class="mb-4">
                                        <i class="bi bi-lightbulb text-warning" style="font-size: 4rem;"></i>
                                    </div>
                                    <h5 class="card-title">Apa yang Akan Kamu Pelajari? 🤔</h5>
                                    <p class="card-text">Kamu akan memahami konsep dasar Hukum Archimedes dan bagaimana benda berperilaku di dalam air!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4" data-aos="fade-left">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center p-4">
                                    <div class="mb-4">
                                        <i class="bi bi-eye text-info" style="font-size: 4rem;"></i>
                                    </div>
                                    <h5 class="card-title">Apa yang Akan Kamu Lihat? 👀</h5>
                                    <p class="card-text">Kamu akan melihat simulasi benda yang terapung, melayang, atau tenggelam di dalam air!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4" data-aos="fade-right">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center p-4">
                                    <div class="mb-4">
                                        <i class="bi bi-controller text-success" style="font-size: 4rem;"></i>
                                    </div>
                                    <h5 class="card-title">Apa yang Akan Kamu Coba? 🎮</h5>
                                    <p class="card-text">Kamu bisa mengubah-ubah parameter benda dan air untuk melihat apa yang terjadi!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4" data-aos="fade-left">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center p-4">
                                    <div class="mb-4">
                                        <i class="bi bi-trophy text-danger" style="font-size: 4rem;"></i>
                                    </div>
                                    <h5 class="card-title">Apa yang Akan Kamu Dapatkan? 🏆</h5>
                                    <p class="card-text">Kamu akan mendapatkan pemahaman yang lebih baik tentang Hukum Archimedes dan aplikasinya dalam kehidupan sehari-hari!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-5">
                        <h3 class="text-center mb-4">Target Pembelajaran 🎯</h3>
                        <div class="row">
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="200">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-3">
                                            <i class="bi bi-star-fill text-warning" style="font-size: 2rem;"></i>
                                        </div>
                                        <h5 class="card-title">Pemahaman Konsep</h5>
                                        <p class="card-text">Memahami pengertian Hukum Archimedes dan rumus gaya apung dengan mudah</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="400">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-3">
                                            <i class="bi bi-gear text-info" style="font-size: 2rem;"></i>
                                        </div>
                                        <h5 class="card-title">Keterampilan Praktik</h5>
                                        <p class="card-text">Mengoperasikan simulasi dan menghitung gaya apung dengan percaya diri</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="600">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-3">
                                            <i class="bi bi-graph-up text-success" style="font-size: 2rem;"></i>
                                        </div>
                                        <h5 class="card-title">Aplikasi</h5>
                                        <p class="card-text">Mengidentifikasi penerapan Hukum Archimedes dalam kehidupan sehari-hari</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Materi Page -->
        <div class="page-section" id="materiPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-book-fill"></i>
                        Materi Pembelajaran
                    </h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h3>Apa Itu Hukum Archimedes? 🤔</h3>
                            <p>Hukum Archimedes itu sebenarnya sederhana lho! Coba bayangkan...</p>
                            <div class="formula-box" data-aos="slide-in-left">
                                "Ketika kamu masuk ke dalam bak mandi, air yang tumpah itu sama banyaknya dengan volume tubuh kamu yang tercelup. Nah, Hukum Archimedes mengatakan bahwa benda yang dicelupkan ke dalam air akan mendapat gaya ke atas yang besarnya sama dengan berat air yang dipindahkan!"
                            </div>
                            <p data-aos="fade-up">Hukum ini ditemukan oleh Archimedes, seorang ilmuwan dari Yunani kuno. Konon, dia menemukannya saat sedang mandi dan langsung berteriak "Eureka!" (Aku menemukannya!) sambil lari telanjang di jalan! 😂</p>
                        </div>
                        
                        <div class="col-md-6">
                            <h3>Rumus Gaya Apung 📝</h3>
                            <p>Gaya apung itu gaya yang mendorong benda ke atas saat di dalam air. Rumusnya gampang banget:</p>
                            <div class="formula-box" data-aos="slide-in-left">
                                Fa = ρf × g × V
                            </div>
                            <p data-aos="fade-up"><strong>Apa artinya tuh? 🤔</strong></p>
                            <ul data-aos="fade-up">
                                <li><strong>Fa</strong> = Gaya apung (Newton) → Gaya yang mendorong benda ke atas</li>
                                <li><strong>ρf</strong> = Massa jenis air (kg/m³) → Seberapa padat airnya</li>
                                <li><strong>g</strong> = Gravitasi (9.8 m/s²) → Gaya tarik bumi</li>
                                <li><strong>V</strong> = Volume benda yang tercelup (m³) → Seberapa besar benda yang masuk ke air</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-5">
                        <h3>Tiga Kondisi Benda di Dalam Air 🌊</h3>
                        <p data-aos="fade-up">Benda di dalam air bisa memiliki tiga kondisi lho! Coba perhatikan:</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="200">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-4">
                                            <i class="bi bi-arrow-up-circle-fill text-success" style="font-size: 4rem;"></i>
                                        </div>
                                        <h5 class="card-title">Terapung 🚢</h5>
                                        <p class="card-text">Benda melayang di permukaan air, hanya sebagian yang masuk ke air. Contoh: kapal, kayu, dan pelampung!</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="400">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-4">
                                            <i class="bi bi-dash-circle-fill text-warning" style="font-size: 4rem;"></i>
                                        </div>
                                        <h5 class="card-title">Melayang ⚖️</h5>
                                        <p class="card-text">Benda diam di tengah-tengah air, tidak naik dan tidak turun. Contoh: kapal selam yang sedang berhenti di kedalaman tertentu!</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 mb-3" data-aos="zoom-in" data-aos-delay="600">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body text-center">
                                        <div class="mb-4">
                                            <i class="bi bi-arrow-down-circle-fill text-danger" style="font-size: 4rem;"></i>
                                        </div>
                                        <h5 class="card-title">Tenggelam ⬇️</h5>
                                        <p class="card-text">Benda jatuh ke dasar air. Contoh: batu, besi, dan benda-benda yang lebih berat dari air!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-5">
                        <h3>Penerapan Hukum Archimedes dalam Kehidupan Sehari-hari 🌍</h3>
                        <div class="row">
                            <div class="col-md-6 mb-4" data-aos="fade-right">
                                <div class="d-flex align-items-start p-4 bg-light rounded-4">
                                    <div class="flex-shrink-0 me-4">
                                        <i class="bi bi-ship text-primary" style="font-size: 3rem;"></i>
                                    </div>
                                    <div>
                                        <h5>Kapal Laut 🚢</h5>
                                        <p>Kapal yang terbuat dari baja yang berat bisa terapung karena bentuknya yang khusus. Bagian bawah kapal dirancang agar volume air yang dipindahkan cukup besar untuk menghasilkan gaya apung yang lebih besar dari berat kapal!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4" data-aos="fade-left">
                                <div class="d-flex align-items-start p-4 bg-light rounded-4">
                                    <div class="flex-shrink-0 me-4">
                                        <i class="bi bi-droplet-half text-info" style="font-size: 3rem;"></i>
                                    </div>
                                    <div>
                                        <h5>Termometer Galileo 🌡️</h5>
                                        <p>Termometer unik ini bekerja berdasarkan perbedaan massa jenis cairan dan bola-bola kecil di dalamnya. Bola dengan massa jenis lebih kecil dari cairan akan terapung, sedangkan yang lebih besar akan tenggelam!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4" data-aos="fade-right">
                                <div class="d-flex align-items-start p-4 bg-light rounded-4">
                                    <div class="flex-shrink-0 me-4">
                                        <i class="bi bi-balloon text-danger" style="font-size: 3rem;"></i>
                                    </div>
                                    <div>
                                        <h5>Balon Udara 🎈</h5>
                                        <p>Balon udara panas bisa terbang karena udara panas di dalam balon memiliki massa jenis lebih kecil daripada udara di sekitarnya. Akibatnya, gaya apung yang bekerja lebih besar dari berat balon!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4" data-aos="fade-left">
                                <div class="d-flex align-items-start p-4 bg-light rounded-4">
                                    <div class="flex-shrink-0 me-4">
                                        <i class="bi bi-water text-success" style="font-size: 3rem;"></i>
                                    </div>
                                    <div>
                                        <h5>Pelampung 🛟</h5>
                                        <p>Pelampung dirancang dengan bahan yang memiliki massa jenis sangat kecil sehingga dapat menghasilkan gaya apung yang besar untuk menahan berat tubuh manusia di air!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Petunjuk Percobaan Page -->
        <div class="page-section" id="petunjukPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-clipboard-check"></i>
                        Petunjuk Percobaan Simulasi
                    </h2>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">1</span>
                            Kenalan Dengan Simulasi Ini! 👋
                        </h3>
                        <div class="instruction-content">
                            <p>Hai! Simulasi ini dirancang khusus buat kamu supaya lebih mudah memahami Hukum Archimedes. Kamu bisa melihat langsung bagaimana benda berperilaku di dalam air dengan mengubah-ubah parameter yang ada!</p>
                            
                            <div class="tip-box">
                                <h5><i class="bi bi-lightbulb"></i> Tips Seru! 💡</h5>
                                <p>Sebelum mulai, pastikan kamu sudah baca materi tentang Hukum Archimedes ya! Biar lebih paham saat mencoba simulasi ini.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">2</span>
                            Apa Saja yang Bisa Diubah? 🎛️
                        </h3>
                        <div class="instruction-content">
                            <p>Di simulasi ini, ada tiga parameter utama yang bisa kamu ubah dengan menggeser slider:</p>
                            
                            <table class="parameter-table">
                                <thead>
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Rentang Nilai</th>
                                        <th>Fungsinya</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Massa Jenis Benda</strong></td>
                                        <td>100 - 2000 kg/m³</td>
                                        <td>Mengatur seberapa padat benda yang akan dimasukkan ke air</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Volume Benda</strong></td>
                                        <td>0.0001 - 0.005 m³</td>
                                        <td>Mengatur seberapa besar ukuran benda yang akan dimasukkan ke air</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Massa Jenis Air</strong></td>
                                        <td>500 - 1500 kg/m³</td>
                                        <td>Mengatur seberapa padat airnya</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div class="note-box">
                                <h5><i class="bi bi-info-circle"></i> Info Menarik! 📌</h5>
                                <p>Massa jenis air standar itu 1000 kg/m³. Tapi kamu bisa mengubahnya untuk mensimulasikan benda di dalam cairan lain seperti minyak atau air laut!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">3</span>
                            Cara Pakai Simulasinya! 🕹️
                        </h3>
                        <div class="instruction-content">
                            <p>Yuk ikuti langkah-langkah berikut untuk mencoba simulasi:</p>
                            
                            <ol>
                                <li><strong>Buka halaman Simulasi</strong> - Klik menu "Simulasi" di sidebar atau dari halaman Beranda.</li>
                                <li><strong>Lihat posisi awal</strong> - Perhatikan posisi benda di dalam air dan nilai parameter awalnya.</li>
                                <li><strong>Ubah parameter</strong> - Geser slider untuk mengubah nilai parameter yang kamu mau.</li>
                                <li><strong>Amati perubahan</strong> - Lihat apa yang terjadi pada benda setelah kamu ubah parameternya!</li>
                                <li><strong>Catat hasilnya</strong> - Perhatikan berat benda, gaya apung, dan volume benda yang tercelup.</li>
                                <li><strong>Coba lagi</strong> - Ubah parameter lainnya dan lihat perbedaannya.</li>
                                <li><strong>Kembali ke awal</strong> - Klik tombol "Reset Simulasi" untuk mengembalikan semua parameter ke nilai awal.</li>
                            </ol>
                            
                            <div class="tip-box">
                                <h5><i class="bi bi-lightbulb"></i> Tips Eksperimen! 🔬</h5>
                                <p>Coba ubah satu parameter saja sementara yang lain tetap, biar kamu bisa lihat pengaruhnya dengan jelas!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">4</span>
                            Membaca Hasil Simulasi 📊
                        </h3>
                        <div class="instruction-content">
                            <p>Setelah mencoba simulasi, kamu akan melihat beberapa hasil yang perlu kamu pahami:</p>
                            
                            <ul>
                                <li><strong>Kondisi Benda</strong> - Benda bisa berada dalam tiga kondisi:
                                    <ul>
                                        <li><span style="color: #198754;"><strong>Terapung</strong> 🚢</span> - Benda melayang di permukaan air, hanya sebagian yang masuk ke air</li>
                                        <li><span style="color: #ffc107;"><strong>Melayang</strong> ⚖️</span> - Benda diam di tengah-tengah air, semua bagian benda masuk ke air</li>
                                        <li><span style="color: #dc3545;"><strong>Tenggelam</strong> ⬇️</span> - Benda jatuh ke dasar, semua bagian benda masuk ke air</li>
                                    </ul>
                                </li>
                                <li><strong>Berat Benda</strong> - Berat benda dihitung dengan rumus W = ρb × g × V</li>
                                <li><strong>Gaya Apung Maksimum</strong> - Gaya apung dihitung dengan rumus Fa = ρf × g × V</li>
                                <li><strong>Volume Tercelup</strong> - Persentase volume benda yang masuk ke dalam air</li>
                            </ul>
                            
                            <div class="note-box">
                                <h5><i class="bi bi-info-circle"></i> Penting Banget! ⚠️</h5>
                                <p>Kondisi benda ditentukan oleh perbandingan antara berat benda dan gaya apung:</p>
                                <ul>
                                    <li>Jika W &lt; Fa, benda akan terapung 🚢</li>
                                    <li>Jika W = Fa, benda akan melayang ⚖️</li>
                                    <li>Jika W &gt; Fa, benda akan tenggelam ⬇️</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">5</span>
                            Ide Eksperimen Seru! 🧪
                        </h3>
                        <div class="instruction-content">
                            <p>Ini beberapa ide eksperimen yang bisa kamu coba untuk lebih paham Hukum Archimedes:</p>
                            
                            <h5><strong>Eksperimen 1: Pengaruh Massa Jenis Benda</strong></h5>
                            <ol>
                                <li>Atur Volume Benda = 0.002 m³ dan Massa Jenis Air = 1000 kg/m³</li>
                                <li>Ubah Massa Jenis Benda dari 100 kg/m³ hingga 2000 kg/m³</li>
                                <li>Amati perubahan kondisi benda dan volume yang tercelup</li>
                                <li>Catat nilai massa jenis benda saat benda mulai tenggelam</li>
                            </ol>
                            
                            <h5><strong>Eksperimen 2: Pengaruh Volume Benda</strong></h5>
                            <ol>
                                <li>Atur Massa Jenis Benda = 800 kg/m³ dan Massa Jenis Air = 1000 kg/m³</li>
                                <li>Ubah Volume Benda dari 0.0001 m³ hingga 0.005 m³</li>
                                <li>Amati perubahan kondisi benda dan volume yang tercelup</li>
                                <li>Perhatikan apakah perubahan volume mempengaruhi kondisi benda</li>
                            </ol>
                            
                            <h5><strong>Eksperimen 3: Pengaruh Massa Jenis Air</strong></h5>
                            <ol>
                                <li>Atur Massa Jenis Benda = 800 kg/m³ dan Volume Benda = 0.002 m³</li>
                                <li>Ubah Massa Jenis Air dari 500 kg/m³ hingga 1500 kg/m³</li>
                                <li>Amati perubahan kondisi benda dan volume yang tercelup</li>
                                <li>Catat nilai massa jenis air saat benda mulai tenggelam</li>
                            </ol>
                            
                            <div class="tip-box">
                                <h5><i class="bi bi-lightbulb"></i> Tips Analisis! 🔍</h5>
                                <p>Setelah mencoba, coba jawab pertanyaan-pertanyaan ini:</p>
                                <ul>
                                    <li>Parameter mana yang paling berpengaruh terhadap kondisi benda?</li>
                                    <li>Bagaimana hubungan antara massa jenis benda dan massa jenis air menentukan kondisi benda?</li>
                                    <li>Mengapa benda dengan massa jenis lebih kecil dari air bisa terapung?</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-card" data-aos="fade-up">
                        <h3 class="instruction-title">
                            <span class="instruction-number">6</span>
                            Kesimpulan Percobaan 📝
                        </h3>
                        <div class="instruction-content">
                            <p>Dari semua eksperimen yang sudah kamu coba, kamu bisa menarik kesimpulan tentang Hukum Archimedes:</p>
                            
                            <ul>
                                <li>Semakin besar volume air yang dipindahkan, semakin besar gaya apung yang dihasilkan</li>
                                <li>Benda akan terapung jika massa jenisnya lebih kecil dari massa jenis air</li>
                                <li>Benda akan melayang jika massa jenisnya sama dengan massa jenis air</li>
                                <li>Benda akan tenggelam jika massa jenisnya lebih besar dari massa jenis air</li>
                                <li>Volume benda yang tercelup tergantung pada perbandingan antara massa jenis benda dan massa jenis air</li>
                            </ul>
                            
                            <div class="note-box">
                                <h5><i class="bi bi-info-circle"></i> Catatan Penting! 📌</h5>
                                <p>Hasil simulasi ini sesuai dengan teori Hukum Archimedes yang menyatakan bahwa gaya apung sama dengan berat air yang dipindahkan oleh benda. Semakin besar volume air yang dipindahkan, semakin besar gaya apung yang dihasilkan.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Simulasi Page -->
        <div class="page-section" id="simulasiPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-play-circle-fill"></i>
                        Simulasi Interaktif dengan Tahapan Discovery
                    </h2>
                    <p data-aos="fade-up">Yuk ikuti tahapan Discovery di bawah ini untuk memahami konsep Hukum Archimedes melalui simulasi interaktif! 🚀</p>
                    
                    <!-- PBL Tabs -->
                    <div class="pbl-tabs" data-aos="fade-up">
                        <div class="pbl-tab active" data-pbl-step="1">
                            <i class="bi bi-lightbulb"></i> Mengenal Masalah
                        </div>
                        <div class="pbl-tab" data-pbl-step="2">
                            <i class="bi bi-pencil-square"></i> Menentukan Masalah
                        </div>
                        <div class="pbl-tab" data-pbl-step="3">
                            <i class="bi bi-search"></i> Mengumpulkan Data
                        </div>
                        <div class="pbl-tab" data-pbl-step="4">
                            <i class="bi bi-graph-up"></i> Menganalisis Data
                        </div>
                        <div class="pbl-tab" data-pbl-step="5">
                            <i class="bi bi-check-circle"></i> Membuktikan
                        </div>
                        <div class="pbl-tab" data-pbl-step="6">
                            <i class="bi bi-clipboard-check"></i> Kesimpulan
                        </div>
                    </div>
                    
                    <!-- PBL Step 1: Mengenal Masalah -->
                    <div class="pbl-content active" id="pbl-step-1">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-lightbulb"></i>
                                Tahap 1: Mengenal Masalah 🤔
                            </h3>
                            <div class="pbl-step-content">
                                <p>Di tahap ini, kita akan mengenal masalah menarik tentang Hukum Archimedes. Masalah yang akan kita investigasi adalah:</p>
                                
                                <div class="formula-box">
                                    "Bagaimana pengaruh perubahan massa jenis, volume benda, dan massa jenis air terhadap kondisi benda di dalam air?"
                                </div>
                                
                                <p>Untuk memahami masalah ini, perhatikan video penjelasan berikut:</p>
                                
                                <!-- Video Container -->
                                <div class="video-container" data-aos="zoom-in">
                                    <iframe 
                                        src="https://www.youtube.com/embed/q4Klx7Li5lY?si=C0f4V_Sfpe_PQI4X" 
                                        title="Video Penjelasan Hukum Archimedes" 
                                        frameborder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                
                                <div class="video-description" data-aos="fade-up">
                                    <h5><i class="bi bi-play-circle"></i> Video Penjelasan</h5>
                                    <p>Video ini menjelaskan konsep dasar Hukum Archimedes dan bagaimana gaya apung bekerja pada benda yang dicelupkan ke dalam air. Perhatikan dengan baik penjelasan tentang faktor-faktor yang memengaruhi kondisi benda di dalam air!</p>
                                </div>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-lightbulb"></i> Coba Perhatikan! 👀</h5>
                                    <p>Bayangkan fenomena sehari-hari seperti kapal yang terapung, balon yang terbang, atau benda yang tenggelam di air. Apa yang membuat mereka berperilaku seperti itu? Yuk kita cari tahu bersama-sama!</p>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-next-pbl" data-next-step="2">
                                        Lanjut ke Tahap 2 <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PBL Step 2: Menentukan Masalah -->
                    <div class="pbl-content" id="pbl-step-2">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-pencil-square"></i>
                                Tahap 2: Menentukan Masalah 📝
                            </h3>
                            <div class="pbl-step-content">
                                <p>Berdasarkan pengamatan kita di tahap 1, mari kita tentukan masalah yang akan kita investigasi. Masalah bisa kita tulis dalam bentuk pertanyaan-pertanyaan berikut:</p>
                                
                                <ul>
                                    <li>Bagaimana pengaruh massa jenis benda terhadap kondisi benda di dalam air?</li>
                                    <li>Bagaimana pengaruh volume benda terhadap kondisi benda di dalam air?</li>
                                    <li>Bagaimana pengaruh massa jenis air terhadap kondisi benda di dalam air?</li>
                                    <li>Bagaimana hubungan antara gaya apung dan berat benda dalam menentukan kondisi benda?</li>
                                </ul>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-lightbulb"></i> Tips Berpikir! 💭</h5>
                                    <p>Coba pikirkan: "Apa yang ingin kita ketahui dari fenomena ini?" atau "Faktor-faktor apa saja yang memengaruhi kondisi benda di dalam air?" Tulislah pertanyaan-pertanyaanmu di buku catatan!</p>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-prev-pbl" data-prev-step="1">
                                        <i class="bi bi-arrow-left"></i> Kembali ke Tahap 1
                                    </button>
                                    <button class="btn-next-pbl" data-next-step="3">
                                        Lanjut ke Tahap 3 <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PBL Step 3: Mengumpulkan Data -->
                    <div class="pbl-content" id="pbl-step-3">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-search"></i>
                                Tahap 3: Mengumpulkan Data 🔍
                            </h3>
                            <div class="pbl-step-content">
                                <p>Di tahap ini, kita akan mengumpulkan data melalui simulasi interaktif. Ubah parameter-parameter di bawah ini dan amati kondisi benda yang terjadi:</p>
                                
                                <div class="simulation-container" data-aos="zoom-in">
                                    <canvas id="waterCanvas2" width="800" height="300"></canvas>
                                    <div class="water-wave" style="top: 150px;"></div>
                                </div>
                                
                                <div class="state-indicator" id="stateIndicator2" data-aos="fade-up">
                                    <i class="bi bi-question-circle"></i> Ubah parameter untuk melihat kondisi benda
                                </div>
                                
                                <div class="control-panel" data-aos="fade-up">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-box"></i> Massa Jenis Benda (kg/m³): <span id="densityValue2">800</span></label>
                                                <input type="range" class="form-range" id="densitySlider2" min="100" max="2000" value="800">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-cube"></i> Volume Benda (m³): <span id="volumeValue2">0.001</span></label>
                                                <input type="range" class="form-range" id="volumeSlider2" min="0.0001" max="0.005" step="0.0001" value="0.001">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-droplet"></i> Massa Jenis Air (kg/m³): <span id="fluidDensityValue2">1000</span></label>
                                                <input type="range" class="form-range" id="fluidDensitySlider2" min="500" max="1500" value="1000">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-4 text-center">
                                        <button class="btn btn-primary" id="resetSimulation2" data-aos="zoom-in">
                                            <i class="bi bi-arrow-clockwise"></i> Reset Simulasi
                                        </button>
                                    </div>
                                    
                                    <!-- Hasil Perhitungan -->
                                    <div class="mt-4">
                                        <h5>Hasil Perhitungan:</h5>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-arrow-down-circle-fill text-danger me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Berat Benda:</strong> <span id="weightResult2">7.84</span> N
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-arrow-up-circle-fill text-success me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Gaya Apung:</strong> <span id="buoyancyResult2">9.80</span> N
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-water text-primary me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Volume Tercelup:</strong> <span id="submergedVolume2">80.0</span>%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="state-explanation" id="stateExplanation2" style="display: none;">
                                    <h5><i class="bi bi-info-circle"></i> Keterangan Kondisi Benda</h5>
                                    <p id="explanationText2"></p>
                                </div>
                                
                                <div class="mt-4">
                                    <h5>Catat data kamu di tabel berikut:</h5>
                                    <table class="parameter-table">
                                        <thead>
                                            <tr>
                                                <th>Percobaan</th>
                                                <th>Massa Jenis Benda (kg/m³)</th>
                                                <th>Volume Benda (m³)</th>
                                                <th>Massa Jenis Air (kg/m³)</th>
                                                <th>Kondisi Benda</th>
                                                <th>Volume Tercelup (%)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>800</td>
                                                <td>0.001</td>
                                                <td>1000</td>
                                                <td>-</td>
                                                <td>-</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>1200</td>
                                                <td>0.001</td>
                                                <td>1000</td>
                                                <td>-</td>
                                                <td>-</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>800</td>
                                                <td>0.003</td>
                                                <td>1000</td>
                                                <td>-</td>
                                                <td>-</td>
                                            </tr>
                                            <tr>
                                                <td>4</td>
                                                <td>800</td>
                                                <td>0.001</td>
                                                <td>800</td>
                                                <td>-</td>
                                                <td>-</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-lightbulb"></i> Tips Mengumpulkan Data! 📊</h5>
                                    <p>Ubah satu parameter pada satu kali percobaan, biar kamu bisa melihat pengaruhnya dengan jelas. Catat semua perubahan yang terjadi pada benda!</p>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-prev-pbl" data-prev-step="2">
                                        <i class="bi bi-arrow-left"></i> Kembali ke Tahap 2
                                    </button>
                                    <button class="btn-next-pbl" data-next-step="4">
                                        Lanjut ke Tahap 4 <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PBL Step 4: Menganalisis Data -->
                    <div class="pbl-content" id="pbl-step-4">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-graph-up"></i>
                                Tahap 4: Menganalisis Data 📈
                            </h3>
                            <div class="pbl-step-content">
                                <p>Di tahap ini, kita akan menganalisis data yang sudah kita kumpulkan di tahap sebelumnya. Analisis data dilakukan dengan membandingkan hasil percobaan dan mencari pola atau hubungan antar variabel.</p>
                                
                                <h5>Langkah-langkah analisis data:</h5>
                                <ol>
                                    <li>Bandingkan hasil Percobaan 1 dan 2. Apa yang terjadi pada kondisi benda ketika massa jenis benda diubah dari 800 kg/m³ menjadi 1200 kg/m³?</li>
                                    <li>Bandingkan hasil Percobaan 1 dan 3. Apa yang terjadi pada kondisi benda ketika volume benda diubah dari 0.001 m³ menjadi 0.003 m³?</li>
                                    <li>Bandingkan hasil Percobaan 1 dan 4. Apa yang terjadi pada kondisi benda ketika massa jenis air diubah dari 1000 kg/m³ menjadi 800 kg/m³?</li>
                                    <li>Hitung berat benda (W = ρb × g × V) dan gaya apung (Fa = ρf × g × V) untuk setiap percobaan.</li>
                                    <li>Bandingkan nilai berat benda dan gaya apung untuk setiap percobaan. Apa hubungan antara berat benda, gaya apung, dan kondisi benda?</li>
                                </ol>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-lightbulb"></i> Tips Menganalisis! 🔍</h5>
                                    <p>Cari pola dari data yang kamu kumpulkan. Apa yang sama dan apa yang berbeda antara setiap percobaan? Bagaimana hubungan antara perubahan parameter dan kondisi benda?</p>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-prev-pbl" data-prev-step="3">
                                        <i class="bi bi-arrow-left"></i> Kembali ke Tahap 3
                                    </button>
                                    <button class="btn-next-pbl" data-next-step="5">
                                        Lanjut ke Tahap 5 <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PBL Step 5: Membuktikan -->
                    <div class="pbl-content" id="pbl-step-5">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-check-circle"></i>
                                Tahap 5: Membuktikan ✅
                            </h3>
                            <div class="pbl-step-content">
                                <p>Di tahap ini, kita akan membuktikan temuan kita dengan melakukan percobaan tambahan atau membandingkan dengan teori Hukum Archimedes.</p>
                                
                                <h5>Membuktikan melalui percobaan tambahan:</h5>
                                <p>Lakukan percobaan dengan parameter berikut dan bandingkan hasilnya dengan prediksi kamu berdasarkan analisis di tahap sebelumnya:</p>
                                
                                <ul>
                                    <li>Prediksi kondisi benda jika massa jenis benda = 600 kg/m³, volume benda = 0.002 m³, dan massa jenis air = 1000 kg/m³</li>
                                    <li>Prediksi kondisi benda jika massa jenis benda = 1000 kg/m³, volume benda = 0.001 m³, dan massa jenis air = 1000 kg/m³</li>
                                    <li>Prediksi kondisi benda jika massa jenis benda = 1500 kg/m³, volume benda = 0.001 m³, dan massa jenis air = 1000 kg/m³</li>
                                </ul>
                                
                                <div class="simulation-container" data-aos="zoom-in">
                                    <canvas id="waterCanvas3" width="800" height="300"></canvas>
                                    <div class="water-wave" style="top: 150px;"></div>
                                </div>
                                
                                <div class="state-indicator" id="stateIndicator3" data-aos="fade-up">
                                    <i class="bi bi-question-circle"></i> Ubah parameter untuk melihat kondisi benda
                                </div>
                                
                                <div class="control-panel" data-aos="fade-up">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-box"></i> Massa Jenis Benda (kg/m³): <span id="densityValue3">800</span></label>
                                                <input type="range" class="form-range" id="densitySlider3" min="100" max="2000" value="800">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-cube"></i> Volume Benda (m³): <span id="volumeValue3">0.001</span></label>
                                                <input type="range" class="form-range" id="volumeSlider3" min="0.0001" max="0.005" step="0.0001" value="0.001">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="slider-container">
                                                <label class="slider-label"><i class="bi bi-droplet"></i> Massa Jenis Air (kg/m³): <span id="fluidDensityValue3">1000</span></label>
                                                <input type="range" class="form-range" id="fluidDensitySlider3" min="500" max="1500" value="1000">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-4 text-center">
                                        <button class="btn btn-primary" id="resetSimulation3" data-aos="zoom-in">
                                            <i class="bi bi-arrow-clockwise"></i> Reset Simulasi
                                        </button>
                                    </div>
                                    
                                    <!-- Hasil Perhitungan -->
                                    <div class="mt-4">
                                        <h5>Hasil Perhitungan:</h5>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-arrow-down-circle-fill text-danger me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Berat Benda:</strong> <span id="weightResult3">7.84</span> N
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-arrow-up-circle-fill text-success me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Gaya Apung:</strong> <span id="buoyancyResult3">9.80</span> N
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-3">
                                                    <i class="bi bi-water text-primary me-3" style="font-size: 1.5rem;"></i>
                                                    <div>
                                                        <strong>Volume Tercelup:</strong> <span id="submergedVolume3">80.0</span>%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="state-explanation" id="stateExplanation3" style="display: none;">
                                    <h5><i class="bi bi-info-circle"></i> Keterangan Kondisi Benda</h5>
                                    <p id="explanationText3"></p>
                                </div>
                                
                                <h5>Membuktikan melalui teori:</h5>
                                <p>Bandingkan temuan kamu dengan teori Hukum Archimedes yang menyatakan bahwa:</p>
                                <div class="formula-box">
                                    "Benda yang dicelupkan ke dalam air akan mengalami gaya ke atas (gaya apung) yang besarnya sama dengan berat air yang dipindahkan oleh benda tersebut."
                                </div>
                                <p>Berdasarkan teori ini, kondisi benda di dalam air ditentukan oleh perbandingan antara berat benda (W = ρb × g × V) dan gaya apung (Fa = ρf × g × V):</p>
                                <ul>
                                    <li>Jika W < Fa, benda akan terapung 🚢</li>
                                    <li>Jika W = Fa, benda akan melayang ⚖️</li>
                                    <li>Jika W > Fa, benda akan tenggelam ⬇️</li>
                                </ul>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-lightbulb"></i> Tips Membuktikan! 🔬</h5>
                                    <p>Bandingkan hasil percobaan kamu dengan teori. Apakah hasilnya sesuai? Jika ada perbedaan, coba pikirkan apa yang menyebabkannya!</p>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-prev-pbl" data-prev-step="4">
                                        <i class="bi bi-arrow-left"></i> Kembali ke Tahap 4
                                    </button>
                                    <button class="btn-next-pbl" data-next-step="6">
                                        Lanjut ke Tahap 6 <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PBL Step 6: Kesimpulan -->
                    <div class="pbl-content" id="pbl-step-6">
                        <div class="pbl-step">
                            <h3 class="pbl-step-title">
                                <i class="bi bi-clipboard-check"></i>
                                Tahap 6: Kesimpulan 📝
                            </h3>
                            <div class="pbl-step-content">
                                <p>Selamat! Kamu telah menyelesaikan semua tahap pembelajaran Hukum Archimedes. Sekarang, mari kita rangkum semua yang telah kamu pelajari.</p>
                                
                                <div class="kesimpulan-card" data-aos="zoom-in">
                                    <h3 class="kesimpulan-title">
                                        <i class="bi bi-lightbulb"></i>
                                        Ringkasan Pembelajaran
                                    </h3>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-4" data-aos="fade-right">
                                            <div class="kesimpulan-point">
                                                <div class="kesimpulan-icon primary">
                                                    <i class="bi bi-lightbulb"></i>
                                                </div>
                                                <div class="kesimpulan-text">
                                                    <h5>Prinsip Dasar 💡</h5>
                                                    <p>Hukum Archimedes menjelaskan hubungan antara gaya apung dengan berat air yang dipindahkan. Semakin besar volume air yang dipindahkan, semakin besar gaya apung yang dihasilkan.</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6 mb-4" data-aos="fade-left">
                                            <div class="kesimpulan-point">
                                                <div class="kesimpulan-icon success">
                                                    <i class="bi bi-calculator"></i>
                                                </div>
                                                <div class="kesimpulan-text">
                                                    <h5>Perhitungan Gaya Apung 🧮</h5>
                                                    <p>Gaya apung bisa dihitung dengan rumus Fa = ρf × g × V, di mana massa jenis air, gravitasi, dan volume benda yang tercelup adalah faktor penentunya.</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6 mb-4" data-aos="fade-right">
                                            <div class="kesimpulan-point">
                                                <div class="kesimpulan-icon info">
                                                    <i class="bi bi-water"></i>
                                                </div>
                                                <div class="kesimpulan-text">
                                                    <h5>Tiga Kondisi Benda 🌊</h5>
                                                    <p>Benda di dalam air bisa berada dalam tiga kondisi: terapung (Fa > W), melayang (Fa = W), atau tenggelam (Fa < W), tergantung pada perbandingan gaya apung dan berat benda.</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6 mb-4" data-aos="fade-left">
                                            <div class="kesimpulan-point">
                                                <div class="kesimpulan-icon warning">
                                                    <i class="bi bi-globe"></i>
                                                </div>
                                                <div class="kesimpulan-text">
                                                    <h5>Aplikasi Luas 🌍</h5>
                                                    <p>Hukum Archimedes punya banyak aplikasi dalam kehidupan sehari-hari, mulai dari desain kapal, pesawat terbang, hingga alat ukur seperti termometer Galileo dan hidrometer.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="pbl-note">
                                    <h5><i class="bi bi-info-circle"></i> Penjelasan Guru 💡</h5>
                                    <p>Berdasarkan semua percobaan yang telah kamu lakukan, dapat disimpulkan bahwa Hukum Archimedes adalah prinsip fundamental dalam fisika yang mengatur perilaku benda dalam fluida. Pemahaman yang baik tentang hukum ini sangat penting untuk berbagai aplikasi teknik dan teknologi. Sekarang, tuliskan kesimpulanmu sendiri berdasarkan pemahaman yang telah kamu dapatkan!</p>
                                </div>
                                
                                <!-- Student Input Box for PBL Conclusion -->
                                <div class="student-input-box" data-aos="zoom-in">
                                    <h3 class="student-input-title">
                                        <i class="bi bi-pencil-square"></i>
                                        Tuliskan Kesimpulanmu
                                    </h3>
                                    <p>Berdasarkan investigasi yang telah kamu lakukan, tuliskan kesimpulanmu tentang Hukum Archimedes:</p>
                                    
                                    <textarea class="student-input-area" id="pblStudentConclusion" placeholder="Tuliskan kesimpulanmu di sini..."></textarea>
                                    
                                    <div class="student-input-actions">
                                        <div class="student-input-hint">
                                            <i class="bi bi-info-circle"></i> Minimal 3 kalimat
                                        </div>
                                        <button class="btn btn-warning" id="submitPBLConclusion">
                                            <i class="bi bi-send-fill"></i> Selesai
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="pbl-action">
                                    <button class="btn-prev-pbl" data-prev-step="5">
                                        <i class="bi bi-arrow-left"></i> Kembali ke Tahap 5
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contoh Page -->
        <div class="page-section" id="contohPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-pencil-square"></i>
                        Contoh Soal
                    </h2>
                    
                    <div class="example-card" data-aos="slide-in-left">
                        <h4>Contoh Soal 1: Menghitung Gaya Apung 📊</h4>
                        <p>Sebuah balok kayu dengan volume 0.002 m³ dimasukkan ke dalam air sepenuhnya. Jika massa jenis air adalah 1000 kg/m³ dan percepatan gravitasi 10 m/s², hitunglah gaya apung yang bekerja pada balok kayu tersebut!</p>
                        
                        <div class="mt-4">
                            <h5>Pembahasan:</h5>
                            <p><strong>Diketahui:</strong></p>
                            <ul>
                                <li>Volume benda (V) = 0.002 m³</li>
                                <li>Massa jenis air (ρf) = 1000 kg/m³</li>
                                <li>Percepatan gravitasi (g) = 10 m/s²</li>
                            </ul>
                            <p><strong>Ditanya:</strong> Gaya apung (Fa) = ?</p>
                            <p><strong>Jawab:</strong></p>
                            <div class="formula-box">
                                Fa = ρf × g × V<br>
                                Fa = 1000 × 10 × 0.002<br>
                                Fa = 20 N
                            </div>
                            <p>Jadi, gaya apung yang bekerja pada balok kayu tersebut adalah 20 Newton.</p>
                        </div>
                    </div>
                    
                    <div class="example-card" data-aos="slide-in-right">
                        <h4>Contoh Soal 2: Menentukan Kondisi Benda 🔍</h4>
                        <p>Sebuah benda logam memiliki berat 50 N di udara. Ketika dicelupkan ke dalam air, benda tersebut mengalami gaya apung sebesar 30 N. Tentukan kondisi benda tersebut di dalam air!</p>
                        
                        <div class="mt-4">
                            <h5>Pembahasan:</h5>
                            <p><strong>Diketahui:</strong></p>
                            <ul>
                                <li>Berat benda di udara (W) = 50 N</li>
                                <li>Gaya apung (Fa) = 30 N</li>
                            </ul>
                            <p><strong>Ditanya:</strong> Kondisi benda di dalam air?</p>
                            <p><strong>Jawab:</strong></p>
                            <p>Untuk menentukan kondisi benda di dalam air, kita bandingkan berat benda dengan gaya apung:</p>
                            <ul>
                                <li>Jika W > Fa, maka benda akan tenggelam ⬇️</li>
                                <li>Jika W = Fa, maka benda akan melayang ⚖️</li>
                                <li>Jika W < Fa, maka benda akan terapung 🚢</li>
                            </ul>
                            <p>Dalam soal ini, W = 50 N dan Fa = 30 N, sehingga W > Fa.</p>
                            <p>Jadi, benda tersebut akan tenggelam di dalam air.</p>
                        </div>
                    </div>
                    
                    <div class="example-card" data-aos="slide-in-left">
                        <h4>Contoh Soal 3: Menghitung Volume Tercelup 📏</h4>
                        <p>Sebuah balok kayu dengan massa jenis 600 kg/m³ dan volume 0.005 m³ diletakkan di atas air. Jika massa jenis air 1000 kg/m³ dan percepatan gravitasi 10 m/s², hitunglah volume balok yang tercelup dalam air!</p>
                        
                        <div class="mt-4">
                            <h5>Pembahasan:</h5>
                            <p><strong>Diketahui:</strong></p>
                            <ul>
                                <li>Massa jenis kayu (ρb) = 600 kg/m³</li>
                                <li>Volume kayu (V) = 0.005 m³</li>
                                <li>Massa jenis air (ρf) = 1000 kg/m³</li>
                                <li>Percepatan gravitasi (g) = 10 m/s²</li>
                            </ul>
                            <p><strong>Ditanya:</strong> Volume tercelup (Vt) = ?</p>
                            <p><strong>Jawab:</strong></p>
                            <p>Ketika benda terapung, berat benda sama dengan gaya apung:</p>
                            <div class="formula-box">
                                W = Fa<br>
                                ρb × V × g = ρf × Vt × g<br>
                                600 × 0.005 × 10 = 1000 × Vt × 10<br>
                                30 = 10000 × Vt<br>
                                Vt = 30 / 10000<br>
                                Vt = 0.003 m³
                            </div>
                            <p>Untuk mencari persentase volume yang tercelup:</p>
                            <div class="formula-box">
                                % Vt = (Vt / V) × 100%<br>
                                % Vt = (0.003 / 0.005) × 100%<br>
                                % Vt = 60%
                            </div>
                            <p>Jadi, volume balok yang tercelup dalam air adalah 0.003 m³ atau 60% dari volume total balok.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Kuis Page -->
        <div class="page-section" id="kuisPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-controller"></i>
                        Kuis & Game
                    </h2>
                    <p data-aos="fade-up">Yuk uji pengetahuanmu tentang Hukum Archimedes dengan kuis interaktif berikut! 🎮</p>
                    
                    <!-- Quiz Section -->
                    <div id="quizSection">
                        <div class="game-card" data-aos="zoom-in">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4>Pertanyaan <span id="questionNumber">1</span> dari <span id="totalQuestions">10</span></h4>
                                <div class="score-display">Skor: <span id="scoreValue">0</span></div>
                            </div>
                            
                            <div class="progress mb-4">
                                <div class="progress-bar" id="progressBar" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">10%</div>
                            </div>
                            
                            <div id="questionContainer">
                                <h4 id="questionText">Memuat pertanyaan...</h4>
                                
                                <div id="optionsContainer" class="mt-4">
                                    <!-- Options will be dynamically inserted here -->
                                </div>
                                
                                <div class="mt-4 d-none" id="feedbackContainer">
                                    <div class="alert" id="feedbackAlert" role="alert">
                                        <p id="feedbackText"></p>
                                    </div>
                                    <button class="btn btn-primary" id="nextQuestionBtn">
                                        <i class="bi bi-arrow-right-circle"></i> Pertanyaan Selanjutnya
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mt-4 d-none" id="quizResult">
                                <div class="text-center">
                                    <h4>Hasil Kuis</h4>
                                    <div class="achievement-badge">
                                        <i class="bi bi-trophy-fill"></i>
                                    </div>
                                    <h5>Skor Akhir: <span id="finalScore">0</span></h5>
                                    <p id="resultMessage"></p>
                                    <button class="btn btn-primary" id="goToGameBtn">
                                        <i class="bi bi-controller"></i> Lanjut ke Game Tebak Gambar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Game Section - Initially Hidden -->
                    <div id="gameSection" class="d-none">
                        <div class="game-card mt-5" data-aos="zoom-in" data-aos-delay="200">
                            <h3>Game: Tebak Kondisi Benda 🎯</h3>
                            <p data-aos="fade-up">Tebak kondisi benda (terapung, melayang, atau tenggelam) berdasarkan parameter yang diberikan!</p>
                            
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <h5>Parameter Benda:</h5>
                                    <ul id="gameParameters">
                                        <li>Massa Jenis Benda: <span id="gameDensity">700</span> kg/m³</li>
                                        <li>Volume Benda: <span id="gameVolume">0.002</span> m³</li>
                                        <li>Massa Jenis Air: <span id="gameFluidDensity">1000</span> kg/m³</li>
                                    </ul>
                                    
                                    <div class="mt-4">
                                        <h5>Prediksi Kondisi Benda:</h5>
                                        <div class="d-grid gap-3">
                                            <button class="btn btn-outline-success game-choice" data-choice="floating">
                                                <i class="bi bi-arrow-up-circle"></i> Terapung 🚢
                                            </button>
                                            <button class="btn btn-outline-warning game-choice" data-choice="suspending">
                                                <i class="bi bi-dash-circle"></i> Melayang ⚖️
                                            </button>
                                            <button class="btn btn-outline-danger game-choice" data-choice="sinking">
                                                <i class="bi bi-arrow-down-circle"></i> Tenggelam ⬇️
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="text-center">
                                        <canvas id="gameCanvas" width="300" height="300"></canvas>
                                        <div class="mt-3">
                                            <span id="gameScore" class="score-display">Skor: 0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 d-none" id="gameFeedback">
                                <div class="alert" id="gameFeedbackAlert" role="alert">
                                    <p id="gameFeedbackText"></p>
                                </div>
                            </div>
                            
                            <!-- Game Navigation Buttons -->
                            <div class="game-navigation">
                                <button class="game-nav-btn" id="nextGameQuestionBtn">
                                    <i class="bi bi-arrow-right-circle"></i> Lanjut ke Pertanyaan Berikut
                                </button>
                                <button class="game-nav-btn" id="goToSelesaiBtn">
                                    <i class="bi bi-flag-fill"></i> Menuju ke Menu Selesai
                                </button>
                            </div>
                            
                            <!-- Game Result Card -->
                            <div class="game-result-card" id="gameResultCard">
                                <h3 class="game-result-title">Game Selesai!</h3>
                                <div class="game-result-score">Skor Akhir: <span id="finalGameScore">0</span></div>
                                <p class="game-result-message" id="gameResultMessage"></p>
                                <button class="game-nav-btn" id="goToSelesaiFromGameBtn">
                                    <i class="bi bi-flag-fill"></i> Menuju ke Menu Selesai
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Selesai Page -->
        <div class="page-section" id="selesaiPage">
            <div class="container">
                <div class="section-card" data-aos="fade-up">
                    <h2 class="section-title">
                        <i class="bi bi-flag-fill"></i>
                        Selesai
                    </h2>
                    
                    <div class="selesai-container" data-aos="zoom-in">
                        <div class="selesai-icon">
                            <i class="bi bi-check-circle-fill"></i>
                        </div>
                        <h3 class="selesai-title">Selamat! 🎉</h3>
                        <p class="selesai-message">
                            Kamu telah berhasil menyelesaikan pembelajaran tentang Hukum Archimedes. 
                            Kesimpulan yang telah kamu kirim telah tersimpan dan siap untuk dilihat oleh gurumu.
                        </p>
                        
                        <div id="conclusionDisplay" class="mt-4 p-4 bg-light rounded-3">
                            <h5>Kesimpulan Kamu:</h5>
                            <p id="displayedConclusion" class="mt-2">Memuat kesimpulan...</p>
                        </div>
                        
                        <div class="selesai-actions">
                            <button class="btn btn-success" id="continueLearningBtn">
                                <i class="bi bi-arrow-repeat"></i> Lanjutkan Pembelajaran
                            </button>
                            <button class="btn btn-danger" id="exitBtn">
                                <i class="bi bi-box-arrow-right"></i> Keluar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            // Daftar username yang diizinkan
            const allowedUsernames = [
                'Merni limbong', 'Putri potabuga', 'Trianita amisan', 'Giscella monggi', 
                'Melody lomban', 'Revaldy karundeng', 'Bill ryan lucas', 'Brenda nyanyi',  'Efraim lolowang',
                'Alfano tampenawas', 'Liza sepria ahmad', 'Greity lumempow', 'Glladyvio derek'
            ];
            
            // Daftar username guru yang diizinkan
            const allowedTeacherUsernames = [
                'guru', 'teacher', 'admin', 'rolles', 'theresje', 'liza'
            ];
            
            // Sound notification system
            let soundEnabled = true;
            let firstLogin = true; // Flag untuk menandai login pertama
            const soundToggle = document.getElementById('soundToggle');
            
            soundToggle.addEventListener('click', function() {
                soundEnabled = !soundEnabled;
                this.classList.toggle('active');
                
                if (soundEnabled) {
                    this.innerHTML = '<i class="bi bi-volume-up-fill"></i>';
                    this.title = 'Matikan Suara';
                } else {
                    this.innerHTML = '<i class="bi bi-volume-mute-fill"></i>';
                    this.title = 'Aktifkan Suara';
                }
            });
            
            // Function to play notification sound with text-to-speech
            function playNotificationSound(message, type = 'info') {
                if (!soundEnabled) return;
                
                // Create audio context for sound effects
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create different sounds based on notification type
                let oscillator = audioContext.createOscillator();
                let gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Set different frequencies based on notification type
                switch(type) {
                    case 'success':
                        oscillator.type = 'sine';
                        oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                        oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                        oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                        break;
                    case 'error':
                        oscillator.type = 'sawtooth';
                        oscillator.frequency.setValueAtTime(220, audioContext.currentTime); // A3
                        oscillator.frequency.setValueAtTime(196, audioContext.currentTime + 0.2); // G3
                        break;
                    case 'warning':
                        oscillator.type = 'triangle';
                        oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4
                        break;
                    default:
                        oscillator.type = 'sine';
                        oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4
                }
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
                
                // Use Web Speech API for text-to-speech
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(message);
                    utterance.lang = 'id-ID';
                    utterance.rate = 1.0;
                    utterance.pitch = 1.0;
                    utterance.volume = 0.8;
                    
                    // Set different voice based on notification type
                    const voices = speechSynthesis.getVoices();
                    const indonesianVoice = voices.find(voice => voice.lang === 'id-ID' || voice.name.includes('Indonesian'));
                    
                    if (indonesianVoice) {
                        utterance.voice = indonesianVoice;
                    }
                    
                    speechSynthesis.speak(utterance);
                }
            }
            
            // Splash screen functionality
            document.getElementById('startButton').addEventListener('click', function() {
                // Play sound
                playNotificationSound('Memulai LMS pembelajaran Hukum Archimedes', 'info');
                
                // Hide splash screen
                document.getElementById('splashScreen').classList.add('hidden');
                
                // Show login container
                setTimeout(() => {
                    document.getElementById('loginContainer').classList.add('show');
                    // Fokus ke input username
                    document.getElementById('username').focus();
                }, 500);
            });
            
            // Login functionality
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value.trim();
                
                if (username === '') {
                    // Tampilkan pesan error jika username kosong
                    const loginCard = document.querySelector('.login-card');
                    const alertDiv = document.createElement('div');
                    alertDiv.className = 'alert alert-danger mt-3';
                    alertDiv.textContent = 'Username tidak boleh kosong!';
                    
                    // Hapus alert sebelumnya jika ada
                    const existingAlert = loginCard.querySelector('.alert');
                    if (existingAlert) {
                        existingAlert.remove();
                    }
                    
                    loginCard.appendChild(alertDiv);
                    
                    // Play error sound
                    playNotificationSound('Username tidak boleh kosong', 'error');
                    return;
                }
                
                // Periksa apakah username ada dalam daftar yang diizinkan
                const isTeacher = allowedTeacherUsernames.includes(username.toLowerCase());
                const isStudent = allowedUsernames.includes(username);
                
                if (!isTeacher && !isStudent) {
                    // Tampilkan pesan error jika username tidak diizinkan
                    const loginCard = document.querySelector('.login-card');
                    const alertDiv = document.createElement('div');
                    alertDiv.className = 'alert alert-danger mt-3';
                    alertDiv.textContent = 'Maaf Username anda tidak terdaftar!.';
                    
                    // Hapus alert sebelumnya jika ada
                    const existingAlert = loginCard.querySelector('.alert');
                    if (existingAlert) {
                        existingAlert.remove();
                    }
                    
                    loginCard.appendChild(alertDiv);
                    
                    // Play error sound
                    playNotificationSound('Username tidak terdaftar', 'error');
                    return;
                }
                
                // Save username and role to sessionStorage
                sessionStorage.setItem('username', username);
                sessionStorage.setItem('userRole', isTeacher ? 'guru' : 'siswa');
                
                // Hide login container
                document.getElementById('loginContainer').classList.remove('show');
                
                // Display username and role
                document.getElementById('welcomeUsername').textContent = username;
                document.getElementById('sidebarUsername').textContent = username;
                document.getElementById('userRole').textContent = isTeacher ? 'Guru' : 'Siswa Kelas X';
                
                // Show/hide guru menu item based on role
                if (isTeacher) {
                    document.getElementById('guruMenuItem').style.display = 'flex';
                } else {
                    document.getElementById('guruMenuItem').style.display = 'none';
                }
                
                // Initialize simulation and quiz after login
                initializeSimulation();
                initializeQuiz();
                initializeGame();
                initializePBL();
                
                // Initialize teacher dashboard if teacher
                if (isTeacher) {
                    initializeTeacherDashboard();
                }
                
                // Hanya putar suara selamat datang jika ini login pertama
                if (firstLogin) {
                    const welcomeMessage = isTeacher ? 'Selamat datang, ' + username + '! Anda masuk sebagai Guru.' : 'Selamat datang, ' + username + '!';
                    playNotificationSound(welcomeMessage, 'success');
                    firstLogin = false; // Set flag ke false setelah login pertama
                }
                
                // Tampilkan notifikasi selamat datang
                showNotification('Selamat datang, ' + username + '!');
            });
            
            // Fungsi untuk menampilkan notifikasi
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'position-fixed top-0 end-0 p-3';
                notification.style.zIndex = '1050';
                notification.innerHTML = `
                    <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="toast-header">
                            <strong class="me-auto">Notifikasi</strong>
                            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                        <div class="toast-body">
                            ${message}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Hapus notifikasi setelah 5 detik
                setTimeout(() => {
                    notification.remove();
                }, 5000);
                
                // Tambahkan event listener untuk tombol close
                notification.querySelector('.btn-close').addEventListener('click', function() {
                    notification.remove();
                });
            }
            
            // Check if user is already logged in
            window.onload = function() {
                // Check if we should show splash screen or go directly to login
                const hasSeenSplash = sessionStorage.getItem('hasSeenSplash');
                
                if (!hasSeenSplash) {
                    // First time visitor, show splash screen
                    sessionStorage.setItem('hasSeenSplash', 'true');
                } else {
                    // Returning visitor, hide splash screen and check for login
                    document.getElementById('splashScreen').classList.add('hidden');
                    
                    const username = sessionStorage.getItem('username');
                    const userRole = sessionStorage.getItem('userRole');
                    
                    if (username) {
                        // User is logged in
                        document.getElementById('welcomeUsername').textContent = username;
                        document.getElementById('sidebarUsername').textContent = username;
                        document.getElementById('userRole').textContent = userRole === 'guru' ? 'Guru' : 'Siswa Kelas X';
                        
                        // Show/hide guru menu item based on role
                        if (userRole === 'guru') {
                            document.getElementById('guruMenuItem').style.display = 'flex';
                            initializeTeacherDashboard();
                        } else {
                            document.getElementById('guruMenuItem').style.display = 'none';
                        }
                        
                        // Initialize simulation and quiz
                        initializeSimulation();
                        initializeQuiz();
                        initializeGame();
                        initializePBL();
                        
                        // Load student conclusion if exists
                        loadStudentConclusion();
                        
                        // Set flag ke false karena ini bukan login pertama
                        firstLogin = false;
                    } else {
                        // User not logged in, show login form
                        setTimeout(() => {
                            document.getElementById('loginContainer').classList.add('show');
                        }, 500);
                    }
                }
            };
            
            // Logout functionality - diubah untuk kembali ke splash screen
            document.getElementById('logoutBtn').addEventListener('click', function() {
                // Play logout sound
                playNotificationSound('Keluar dari LMS', 'info');
                
                // Clear session
                sessionStorage.removeItem('username');
                sessionStorage.removeItem('userRole');
                sessionStorage.removeItem('hasSeenSplash');
                sessionStorage.removeItem('studentConclusion');
                
                // Reset flag untuk login berikutnya
                firstLogin = true;
                
                // Show splash screen
                document.getElementById('splashScreen').classList.remove('hidden');
                
                // Reset to home page
                showPage('home');
            });
            
            // Sidebar functionality
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menuToggle');
            const mainContent = document.getElementById('mainContent');
            const menuItems = document.querySelectorAll('.menu-item');
            
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                menuToggle.classList.toggle('active');
                mainContent.classList.toggle('shifted');
            });
            
            // Page navigation
            function showPage(pageName) {
                // Hide all pages
                document.querySelectorAll('.page-section').forEach(page => {
                    page.classList.remove('active');
                });
                
                // Show selected page
                document.getElementById(pageName + 'Page').classList.add('active');
                
                // Update menu active state
                menuItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-page') === pageName) {
                        item.classList.add('active');
                    }
                });
                
                // Close sidebar on mobile
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('active');
                    menuToggle.classList.remove('active');
                    mainContent.classList.remove('shifted');
                }
                
                // Refresh AOS animations
                AOS.refresh();
                
                // Load student conclusion if on selesai page
                if (pageName === 'selesai') {
                    loadStudentConclusion();
                }
                
                // Load teacher dashboard if on guru page
                if (pageName === 'guru') {
                    loadTeacherDashboard();
                }
            }
            
            // Menu item click handlers
            menuItems.forEach(item => {
                if (!item.id || item.id !== 'logoutBtn') {
                    item.addEventListener('click', () => {
                        const pageName = item.getAttribute('data-page');
                        if (pageName) {
                            showPage(pageName);
                        }
                    });
                }
            });
            
            // Make showPage function global
            window.showPage = showPage;
            
            // Submit PBL conclusion functionality - DIUBAH: Mengarah ke halaman kuis dan game
            document.getElementById('submitPBLConclusion').addEventListener('click', function() {
                const conclusion = document.getElementById('pblStudentConclusion').value.trim();
                
                if (conclusion === '') {
                    // Tampilkan pesan error jika kesimpulan kosong
                    const inputBox = document.querySelector('#pbl-step-6 .student-input-box');
                    const alertDiv = document.createElement('div');
                    alertDiv.className = 'alert alert-danger mt-3';
                    alertDiv.textContent = 'Kesimpulan tidak boleh kosong!';
                    
                    // Hapus alert sebelumnya jika ada
                    const existingAlert = inputBox.querySelector('.alert');
                    if (existingAlert) {
                        existingAlert.remove();
                    }
                    
                    inputBox.appendChild(alertDiv);
                    
                    // Play error sound
                    playNotificationSound('Kesimpulan tidak boleh kosong', 'error');
                    return;
                }
                
                // Simpan kesimpulan ke localStorage untuk guru
                saveStudentConclusion(conclusion);
                
                // Tampilkan notifikasi sukses
                showNotification('Kesimpulan berhasil disimpan! Mengarahkan ke Kuis dan Game.');
                playNotificationSound('Kesimpulan berhasil disimpan! Mengarahkan ke Kuis dan Game', 'success');
                
                // Arahkan ke halaman kuis dan game setelah 2 detik
                setTimeout(() => {
                    showPage('kuis');
                }, 2000);
            });
            
            // Load student conclusion function
            function loadStudentConclusion() {
                const conclusion = sessionStorage.getItem('studentConclusion');
                const displayedConclusion = document.getElementById('displayedConclusion');
                
                if (conclusion) {
                    displayedConclusion.textContent = conclusion;
                } else {
                    displayedConclusion.textContent = 'Belum ada kesimpulan yang dikirim.';
                }
            }
            
            // Save student conclusion to localStorage for teacher access
            function saveStudentConclusion(conclusion) {
                const username = sessionStorage.getItem('username');
                const timestamp = new Date().toISOString();
                
                // Get existing conclusions from localStorage
                let allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                
                // Check if student already has a conclusion
                const existingIndex = allConclusions.findIndex(c => c.username === username);
                
                if (existingIndex !== -1) {
                    // Update existing conclusion
                    allConclusions[existingIndex].conclusion = conclusion;
                    allConclusions[existingIndex].timestamp = timestamp;
                } else {
                    // Add new conclusion
                    allConclusions.push({
                        username: username,
                        conclusion: conclusion,
                        timestamp: timestamp
                    });
                }
                
                // Save back to localStorage
                localStorage.setItem('studentConclusions', JSON.stringify(allConclusions));
                
                // Also save to sessionStorage for current session
                sessionStorage.setItem('studentConclusion', conclusion);
            }
            
            // Selesai page functionality
            document.getElementById('continueLearningBtn').addEventListener('click', function() {
                playNotificationSound('Melanjutkan pembelajaran', 'info');
                showPage('home');
            });
            
            document.getElementById('exitBtn').addEventListener('click', function() {
                // Play exit sound
                playNotificationSound('Keluar dari LMS', 'info');
                
                // Clear session
                sessionStorage.removeItem('username');
                sessionStorage.removeItem('userRole');
                sessionStorage.removeItem('hasSeenSplash');
                sessionStorage.removeItem('studentConclusion');
                
                // Reset flag untuk login berikutnya
                firstLogin = true;
                
                // Show splash screen
                document.getElementById('splashScreen').classList.remove('hidden');
                
                // Reset to home page
                showPage('home');
            });
            
            // PBL Tabs functionality
            function initializePBL() {
                const pblTabs = document.querySelectorAll('.pbl-tab');
                const pblContents = document.querySelectorAll('.pbl-content');
                const btnPrevPbl = document.querySelectorAll('.btn-prev-pbl');
                const btnNextPbl = document.querySelectorAll('.btn-next-pbl');
                
                // Tab click handler
                pblTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const step = this.getAttribute('data-pbl-step');
                        showPBLStep(step);
                    });
                });
                
                // Previous button click handler
                btnPrevPbl.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const step = this.getAttribute('data-prev-step');
                        showPBLStep(step);
                    });
                });
                
                // Next button click handler
                btnNextPbl.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const step = this.getAttribute('data-next-step');
                        showPBLStep(step);
                    });
                });
                
                // Initialize first simulation
                initializePBL2();
                initializePBL3();
            }
            
            function showPBLStep(step) {
                // Update tab active state
                document.querySelectorAll('.pbl-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.getAttribute('data-pbl-step') === step) {
                        tab.classList.add('active');
                    }
                });
                
                // Update content active state
                document.querySelectorAll('.pbl-content').forEach(content => {
                    content.classList.remove('active');
                    if (content.id === 'pbl-step-' + step) {
                        content.classList.add('active');
                    }
                });
                
                // Scroll to top of PBL content
                document.getElementById('pbl-step-' + step).scrollIntoView({ behavior: 'smooth' });
            }
            
            // Simulation variables and functions
            let canvas2, ctx2, canvas3, ctx3, gameCanvas, gameCtx;
            let objectDensity = 800;
            let objectVolume = 0.001;
            let fluidDensity = 1000;
            let gravity = 9.8;
            let objectY = 150;
            let targetY = 150;
            let animationId;
            
            // Fungsi untuk menghitung radius benda berdasarkan volume
            function calculateObjectRadius(volume) {
                // Volume minimum 0.0001 m³ dengan radius minimum 15px
                // Volume maksimum 0.005 m³ dengan radius maksimum 50px
                const minVolume = 0.0001;
                const maxVolume = 0.005;
                const minRadius = 15;
                const maxRadius = 50;
                
                // Normalisasi volume ke rentang 0-1
                const normalizedVolume = (volume - minVolume) / (maxVolume - minVolume);
                
                // Hitung radius dengan skala logaritmik untuk perubahan yang lebih terlihat
                const radius = minRadius + (maxRadius - minRadius) * Math.pow(normalizedVolume, 0.5);
                
                return radius;
            }
            
            function initializeSimulation() {
                // This function is kept for compatibility but not used directly
                // PBL simulations are initialized separately
            }
            
            function initializePBL2() {
                canvas2 = document.getElementById('waterCanvas2');
                ctx2 = canvas2.getContext('2d');
                
                // Set up simulation controls
                const densitySlider = document.getElementById('densitySlider2');
                const volumeSlider = document.getElementById('volumeSlider2');
                const fluidDensitySlider = document.getElementById('fluidDensitySlider2');
                const resetButton = document.getElementById('resetSimulation2');
                
                densitySlider.addEventListener('input', function() {
                    objectDensity = parseInt(this.value);
                    document.getElementById('densityValue2').textContent = objectDensity;
                    updateSimulation2();
                });
                
                volumeSlider.addEventListener('input', function() {
                    objectVolume = parseFloat(this.value);
                    document.getElementById('volumeValue2').textContent = objectVolume.toFixed(4);
                    updateSimulation2();
                });
                
                fluidDensitySlider.addEventListener('input', function() {
                    fluidDensity = parseInt(this.value);
                    document.getElementById('fluidDensityValue2').textContent = fluidDensity;
                    updateSimulation2();
                });
                
                resetButton.addEventListener('click', function() {
                    densitySlider.value = 800;
                    volumeSlider.value = 0.001;
                    fluidDensitySlider.value = 1000;
                    
                    objectDensity = 800;
                    objectVolume = 0.001;
                    fluidDensity = 1000;
                    
                    document.getElementById('densityValue2').textContent = objectDensity;
                    document.getElementById('volumeValue2').textContent = objectVolume.toFixed(4);
                    document.getElementById('fluidDensityValue2').textContent = fluidDensity;
                    
                    updateSimulation2();
                });
                
                // Initial simulation draw
                drawSimulation2();
            }
            
            function initializePBL3() {
                canvas3 = document.getElementById('waterCanvas3');
                ctx3 = canvas3.getContext('2d');
                
                // Set up simulation controls
                const densitySlider = document.getElementById('densitySlider3');
                const volumeSlider = document.getElementById('volumeSlider3');
                const fluidDensitySlider = document.getElementById('fluidDensitySlider3');
                const resetButton = document.getElementById('resetSimulation3');
                
                densitySlider.addEventListener('input', function() {
                    objectDensity = parseInt(this.value);
                    document.getElementById('densityValue3').textContent = objectDensity;
                    updateSimulation3();
                });
                
                volumeSlider.addEventListener('input', function() {
                    objectVolume = parseFloat(this.value);
                    document.getElementById('volumeValue3').textContent = objectVolume.toFixed(4);
                    updateSimulation3();
                });
                
                fluidDensitySlider.addEventListener('input', function() {
                    fluidDensity = parseInt(this.value);
                    document.getElementById('fluidDensityValue3').textContent = fluidDensity;
                    updateSimulation3();
                });
                
                resetButton.addEventListener('click', function() {
                    densitySlider.value = 800;
                    volumeSlider.value = 0.001;
                    fluidDensitySlider.value = 1000;
                    
                    objectDensity = 800;
                    objectVolume = 0.001;
                    fluidDensity = 1000;
                    
                    document.getElementById('densityValue3').textContent = objectDensity;
                    document.getElementById('volumeValue3').textContent = objectVolume.toFixed(4);
                    document.getElementById('fluidDensityValue3').textContent = fluidDensity;
                    
                    updateSimulation3();
                });
                
                // Initial simulation draw
                drawSimulation3();
            }
            
            function updateSimulation2() {
                // Calculate weight and buoyancy
                const weight = objectDensity * objectVolume * gravity;
                const maxBuoyancy = fluidDensity * objectVolume * gravity;
                
                // Update results display
                document.getElementById('weightResult2').textContent = weight.toFixed(2) + ' N';
                document.getElementById('buoyancyResult2').textContent = maxBuoyancy.toFixed(2) + ' N';
                
                // Calculate object radius for position adjustment
                const objectRadius = calculateObjectRadius(objectVolume);
                
                // Determine object state and position
                const stateIndicator = document.getElementById('stateIndicator2');
                const stateExplanation = document.getElementById('stateExplanation2');
                const explanationText = document.getElementById('explanationText2');
                
                if (weight < maxBuoyancy) {
                    // Floating
                    const submergedRatio = weight / maxBuoyancy;
                    // Adjust position based on object size
                    targetY = 150 - (objectRadius * (1 - submergedRatio));
                    stateIndicator.className = 'state-indicator floating';
                    stateIndicator.innerHTML = '<i class="bi bi-arrow-up-circle-fill"></i> Benda Terapung 🚢';
                    document.getElementById('submergedVolume2').textContent = (submergedRatio * 100).toFixed(1) + '%';
                    
                    // Tampilkan penjelasan kondisi terapung
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Terapung</strong><br>Benda terapung karena berat benda (' + weight.toFixed(2) + ' N) lebih kecil dari gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Hanya sebagian benda yang tercelup dalam air, yaitu sekitar ' + (submergedRatio * 100).toFixed(1) + '% dari volume totalnya.';
                } else if (Math.abs(weight - maxBuoyancy) < 0.01) {
                    // Suspending
                    targetY = 150;
                    stateIndicator.className = 'state-indicator suspending';
                    stateIndicator.innerHTML = '<i class="bi bi-dash-circle-fill"></i> Benda Melayang ⚖️';
                    document.getElementById('submergedVolume2').textContent = '100.0%';
                    
                    // Tampilkan penjelasan kondisi melayang
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Melayang</strong><br>Benda melayang karena berat benda (' + weight.toFixed(2) + ' N) sama dengan gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Seluruh bagian benda tercelup dalam air, tetapi benda tidak naik ke permukaan atau turun ke dasar.';
                } else {
                    // Sinking
                    // Adjust position based on object size to ensure it sits at the bottom
                    targetY = 300 - objectRadius;
                    stateIndicator.className = 'state-indicator sinking';
                    stateIndicator.innerHTML = '<i class="bi bi-arrow-down-circle-fill"></i> Benda Tenggelam ⬇️';
                    document.getElementById('submergedVolume2').textContent = '100.0%';
                    
                    // Tampilkan penjelasan kondisi tenggelam
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Tenggelam</strong><br>Benda tenggelam karena berat benda (' + weight.toFixed(2) + ' N) lebih besar dari gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Seluruh bagian benda tercelup dalam air dan benda jatuh ke dasar wadah.';
                }
                
                // Start animation
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                animateObject2();
            }
            
            function updateSimulation3() {
                // Calculate weight and buoyancy
                const weight = objectDensity * objectVolume * gravity;
                const maxBuoyancy = fluidDensity * objectVolume * gravity;
                
                // Update results display
                document.getElementById('weightResult3').textContent = weight.toFixed(2) + ' N';
                document.getElementById('buoyancyResult3').textContent = maxBuoyancy.toFixed(2) + ' N';
                
                // Calculate object radius for position adjustment
                const objectRadius = calculateObjectRadius(objectVolume);
                
                // Determine object state and position
                const stateIndicator = document.getElementById('stateIndicator3');
                const stateExplanation = document.getElementById('stateExplanation3');
                const explanationText = document.getElementById('explanationText3');
                
                if (weight < maxBuoyancy) {
                    // Floating
                    const submergedRatio = weight / maxBuoyancy;
                    // Adjust position based on object size
                    targetY = 150 - (objectRadius * (1 - submergedRatio));
                    stateIndicator.className = 'state-indicator floating';
                    stateIndicator.innerHTML = '<i class="bi bi-arrow-up-circle-fill"></i> Benda Terapung 🚢';
                    document.getElementById('submergedVolume3').textContent = (submergedRatio * 100).toFixed(1) + '%';
                    
                    // Tampilkan penjelasan kondisi terapung
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Terapung</strong><br>Benda terapung karena berat benda (' + weight.toFixed(2) + ' N) lebih kecil dari gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Hanya sebagian benda yang tercelup dalam air, yaitu sekitar ' + (submergedRatio * 100).toFixed(1) + '% dari volume totalnya.';
                } else if (Math.abs(weight - maxBuoyancy) < 0.01) {
                    // Suspending
                    targetY = 150;
                    stateIndicator.className = 'state-indicator suspending';
                    stateIndicator.innerHTML = '<i class="bi bi-dash-circle-fill"></i> Benda Melayang ⚖️';
                    document.getElementById('submergedVolume3').textContent = '100.0%';
                    
                    // Tampilkan penjelasan kondisi melayang
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Melayang</strong><br>Benda melayang karena berat benda (' + weight.toFixed(2) + ' N) sama dengan gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Seluruh bagian benda tercelup dalam air, tetapi benda tidak naik ke permukaan atau turun ke dasar.';
                } else {
                    // Sinking
                    // Adjust position based on object size to ensure it sits at the bottom
                    targetY = 300 - objectRadius;
                    stateIndicator.className = 'state-indicator sinking';
                    stateIndicator.innerHTML = '<i class="bi bi-arrow-down-circle-fill"></i> Benda Tenggelam ⬇️';
                    document.getElementById('submergedVolume3').textContent = '100.0%';
                    
                    // Tampilkan penjelasan kondisi tenggelam
                    stateExplanation.style.display = 'block';
                    explanationText.innerHTML = '<strong>Kondisi: Tenggelam</strong><br>Benda tenggelam karena berat benda (' + weight.toFixed(2) + ' N) lebih besar dari gaya apung maksimum (' + maxBuoyancy.toFixed(2) + ' N). Seluruh bagian benda tercelup dalam air dan benda jatuh ke dasar wadah.';
                }
                
                // Start animation
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                animateObject3();
            }
            
            function animateObject2() {
                // Smooth animation
                objectY += (targetY - objectY) * 0.1;
                
                drawSimulation2();
                
                if (Math.abs(objectY - targetY) > 0.5) {
                    animationId = requestAnimationFrame(animateObject2);
                }
            }
            
            function animateObject3() {
                // Smooth animation
                objectY += (targetY - objectY) * 0.1;
                
                drawSimulation3();
                
                if (Math.abs(objectY - targetY) > 0.5) {
                    animationId = requestAnimationFrame(animateObject3);
                }
            }
            
            function drawSimulation2() {
                // Clear canvas
                ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                
                // Draw water
                ctx2.fillStyle = '#006994';
                ctx2.fillRect(0, 150, canvas2.width, canvas2.height - 150);
                
                // Draw water surface
                ctx2.beginPath();
                ctx2.moveTo(0, 150);
                for (let x = 0; x < canvas2.width; x += 10) {
                    const y = 150 + Math.sin(x / 30 + Date.now() / 1000) * 3;
                    ctx2.lineTo(x, y);
                }
                ctx2.lineTo(canvas2.width, 150);
                ctx2.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx2.fill();
                
                // Draw object with dynamic size based on volume
                const objectRadius = calculateObjectRadius(objectVolume);
                const objectColor = getColorByDensity(objectDensity);
                
                ctx2.beginPath();
                ctx2.arc(canvas2.width / 2, objectY, objectRadius, 0, Math.PI * 2);
                ctx2.fillStyle = objectColor;
                ctx2.fill();
                ctx2.strokeStyle = '#333';
                ctx2.lineWidth = 2;
                ctx2.stroke();
                
                // Draw object label
                ctx2.fillStyle = '#fff';
                ctx2.font = 'bold 14px Arial';
                ctx2.textAlign = 'center';
                ctx2.fillText(objectDensity + ' kg/m³', canvas2.width / 2, objectY + 5);
            }
            
            function drawSimulation3() {
                // Clear canvas
                ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
                
                // Draw water
                ctx3.fillStyle = '#006994';
                ctx3.fillRect(0, 150, canvas3.width, canvas3.height - 150);
                
                // Draw water surface
                ctx3.beginPath();
                ctx3.moveTo(0, 150);
                for (let x = 0; x < canvas3.width; x += 10) {
                    const y = 150 + Math.sin(x / 30 + Date.now() / 1000) * 3;
                    ctx3.lineTo(x, y);
                }
                ctx3.lineTo(canvas3.width, 150);
                ctx3.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx3.fill();
                
                // Draw object with dynamic size based on volume
                const objectRadius = calculateObjectRadius(objectVolume);
                const objectColor = getColorByDensity(objectDensity);
                
                ctx3.beginPath();
                ctx3.arc(canvas3.width / 2, objectY, objectRadius, 0, Math.PI * 2);
                ctx3.fillStyle = objectColor;
                ctx3.fill();
                ctx3.strokeStyle = '#333';
                ctx3.lineWidth = 2;
                ctx3.stroke();
                
                // Draw object label
                ctx3.fillStyle = '#fff';
                ctx3.font = 'bold 14px Arial';
                ctx3.textAlign = 'center';
                ctx3.fillText(objectDensity + ' kg/m³', canvas3.width / 2, objectY + 5);
            }
            
            function getColorByDensity(density) {
                // Return color based on density
                if (density < 500) return '#ff9800';  // Light orange for very light objects
                if (density < 1000) return '#4caf50'; // Green for floating objects
                if (density < 1500) return '#2196f3'; // Blue for neutral objects
                return '#f44336'; // Red for sinking objects
            }
            
            // Quiz variables and functions
            let currentQuestion = 0;
            let score = 0;
            let quizQuestions = [
                {
                    question: "Siapa penemu Hukum Archimedes?",
                    options: ["Isaac Newton", "Albert Einstein", "Archimedes", "Galileo Galilei"],
                    correctAnswer: 2,
                    explanation: "Hukum Archimedes ditemukan oleh ilmuwan Yunani kuno, Archimedes."
                },
                {
                    question: "Gaya apung yang bekerja pada suatu benda di dalam air...",
                    options: [
                        "Sama dengan berat benda",
                        "Sama dengan berat air yang dipindahkan",
                        "Selalu lebih besar dari berat benda",
                        "Selalu lebih kecil dari berat benda"
                    ],
                    correctAnswer: 1,
                    explanation: "Menurut Hukum Archimedes, gaya apung yang bekerja pada suatu benda di dalam air sama dengan berat air yang dipindahkan oleh benda tersebut."
                },
                {
                    question: "Jika massa jenis benda lebih kecil dari massa jenis air, maka benda akan...",
                    options: ["Tenggelam", "Melayang", "Terapung", "Hancur"],
                    correctAnswer: 2,
                    explanation: "Jika massa jenis benda lebih kecil dari massa jenis air, maka benda akan terapung karena gaya apung lebih besar dari berat benda."
                },
                {
                    question: "Rumus untuk menghitung gaya apung adalah...",
                    options: [
                        "Fa = m × g",
                        "Fa = ρb × g × V",
                        "Fa = ρf × g × V",
                        "Fa = P × A"
                    ],
                    correctAnswer: 2,
                    explanation: "Rumus untuk menghitung gaya apung adalah Fa = ρf × g × V, di mana ρf adalah massa jenis air, g adalah percepatan gravitasi, dan V adalah volume benda yang tercelup."
                },
                {
                    question: "Sebuah kapal terbuat dari baja yang memiliki massa jenis besar, namun dapat terapung di air karena...",
                    options: [
                        "Kapal dilapisi bahan anti air",
                        "Kapal memiliki mesin yang kuat",
                        "Bentuk kapal yang membuat volume air yang dipindahkan cukup besar",
                        "Air laut memiliki massa jenis yang sangat besar"
                    ],
                    correctAnswer: 2,
                    explanation: "Meskipun terbuat dari baja yang memiliki massa jenis besar, kapal dapat terapung karena bentuknya yang membuat volume air yang dipindahkan cukup besar, sehingga gaya apung yang dihasilkan lebih besar dari berat kapal."
                },
                {
                    question: "Volume benda yang tercelup saat benda terapung bergantung pada...",
                    options: [
                        "Volume total benda saja",
                        "Perbandingan massa jenis benda dan massa jenis air",
                        "Massa benda saja",
                        "Suhu air"
                    ],
                    correctAnswer: 1,
                    explanation: "Volume benda yang tercelup saat benda terapung bergantung pada perbandingan massa jenis benda dan massa jenis air. Semakin kecil perbandingan massa jenis benda terhadap massa jenis air, semakin kecil volume yang tercelup."
                },
                {
                    question: "Satuan SI untuk massa jenis adalah...",
                    options: ["kg/m²", "kg/m³", "g/cm³", "m/kg"],
                    correctAnswer: 1,
                    explanation: "Satuan SI untuk massa jenis adalah kg/m³ (kilogram per meter kubik)."
                },
                {
                    question: "Benda akan melayang di dalam air jika...",
                    options: [
                        "Massa jenis benda lebih kecil dari massa jenis air",
                        "Massa jenis benda sama dengan massa jenis air",
                        "Volume benda sangat besar",
                        "Benda berbentuk pipih"
                    ],
                    correctAnswer: 1,
                    explanation: "Benda akan melayang di dalam air jika massa jenis benda sama dengan massa jenis air. Pada kondisi ini, berat benda sama dengan gaya apung maksimum."
                },
                {
                    question: "Gaya apung yang dialami benda di dalam air selalu bekerja ke arah...",
                    options: ["Bawah", "Samping", "Atas", "Berputar"],
                    correctAnswer: 2,
                    explanation: "Gaya apung yang dialami benda di dalam air selalu bekerja ke arah atas, berlawanan dengan arah gravitasi."
                },
                {
                    question: "Alat ukur yang menggunakan prinsip Hukum Archimedes adalah...",
                    options: [
                        "Termometer",
                        "Hidrometer",
                        "Barometer",
                        "Speedometer"
                    ],
                    correctAnswer: 1,
                    explanation: "Hidrometer adalah alat ukur yang menggunakan prinsip Hukum Archimedes untuk mengukur massa jenis cairan. Hidrometer akan tercelup lebih dalam pada cairan yang massa jenisnya lebih kecil."
                }
            ];
            
            function initializeQuiz() {
                const nextQuestionBtn = document.getElementById('nextQuestionBtn');
                const goToGameBtn = document.getElementById('goToGameBtn');
                
                nextQuestionBtn.addEventListener('click', function() {
                    currentQuestion++;
                    if (currentQuestion < quizQuestions.length) {
                        showQuestion();
                    } else {
                        showQuizResult();
                    }
                });
                
                goToGameBtn.addEventListener('click', function() {
                    // Hide quiz section and show game section
                    document.getElementById('quizSection').classList.add('d-none');
                    document.getElementById('gameSection').classList.remove('d-none');
                    
                    // Initialize game
                    generateGameProblem();
                    
                    // Play sound
                    playNotificationSound('Memulai game tebak gambar', 'success');
                });
                
                // Show first question
                showQuestion();
            }
            
            function showQuestion() {
                const question = quizQuestions[currentQuestion];
                
                document.getElementById('questionNumber').textContent = currentQuestion + 1;
                document.getElementById('totalQuestions').textContent = quizQuestions.length;
                document.getElementById('questionText').textContent = question.question;
                
                // Update progress bar
                const progress = ((currentQuestion + 1) / quizQuestions.length) * 100;
                const progressBar = document.getElementById('progressBar');
                progressBar.style.width = progress + '%';
                progressBar.textContent = Math.round(progress) + '%';
                progressBar.setAttribute('aria-valuenow', progress);
                
                // Clear previous options
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                // Add options
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'quiz-option';
                    optionElement.textContent = option;
                    optionElement.dataset.index = index;
                    
                    optionElement.addEventListener('click', function() {
                        // Remove previous selections
                        document.querySelectorAll('.quiz-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selection to clicked option
                        this.classList.add('selected');
                        
                        // Check answer
                        checkAnswer(index);
                    });
                    
                    optionsContainer.appendChild(optionElement);
                });
                
                // Hide feedback
                document.getElementById('feedbackContainer').classList.add('d-none');
            }
            
            function checkAnswer(selectedIndex) {
                const question = quizQuestions[currentQuestion];
                const isCorrect = selectedIndex === question.correctAnswer;
                
                // Disable all options
                document.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
                
                // Show correct/incorrect styling
                document.querySelectorAll('.quiz-option').forEach((opt, index) => {
                    if (index === question.correctAnswer) {
                        opt.classList.add('correct');
                    } else if (index === selectedIndex && !isCorrect) {
                        opt.classList.add('incorrect');
                    }
                });
                
                // Update score
                if (isCorrect) {
                    score += 10;
                    document.getElementById('scoreValue').textContent = score;
                }
                
                // Show feedback
                const feedbackAlert = document.getElementById('feedbackAlert');
                const feedbackText = document.getElementById('feedbackText');
                
                if (isCorrect) {
                    feedbackAlert.className = 'alert alert-success';
                    feedbackText.innerHTML = '<strong>Benar!</strong> ' + question.explanation;
                } else {
                    feedbackAlert.className = 'alert alert-danger';
                    feedbackText.innerHTML = '<strong>Salah!</strong> ' + question.explanation;
                }
                
                document.getElementById('feedbackContainer').classList.remove('d-none');
            }
            
            function showQuizResult() {
                document.getElementById('questionContainer').classList.add('d-none');
                document.getElementById('quizResult').classList.remove('d-none');
                
                document.getElementById('finalScore').textContent = score;
                
                let message = '';
                if (score >= 80) {
                    message = 'Luar biasa! Kamu telah menguasai Hukum Archimedes dengan sangat baik!';
                } else if (score >= 60) {
                    message = 'Bagus! Kamu sudah memahami konsep dasar Hukum Archimedes.';
                } else if (score >= 40) {
                    message = 'Cukup baik, tapi masih perlu mempelajari lebih lanjut tentang Hukum Archimedes.';
                } else {
                    message = 'Kamu perlu mempelajari kembali materi Hukum Archimedes.';
                }
                
                document.getElementById('resultMessage').textContent = message;
                
                // Play sound
                playNotificationSound('Kuis selesai! Skor kamu: ' + score, 'success');
            }
            
            // Game variables and functions
            let gameScore = 0;
            let currentGameQuestion = 0;
            let gameDensity, gameVolume, gameFluidDensity;
            let gameCorrectChoice;
            let gameQuestions = [];
            
            // Generate 10 game questions with different parameters
            function generateGameQuestions() {
                gameQuestions = [];
                
                // Create 10 different scenarios with varying parameters
                for (let i = 0; i < 10; i++) {
                    // Generate random parameters
                    const density = Math.floor(Math.random() * 1500) + 200; // 200-1700 kg/m³
                    const volume = (Math.random() * 0.004) + 0.001; // 0.001-0.005 m³
                    const fluidDensity = 1000; // Fixed for water
                    
                    // Calculate correct answer
                    const weight = density * volume * 9.8;
                    const maxBuoyancy = fluidDensity * volume * 9.8;
                    
                    let correctChoice;
                    if (weight < maxBuoyancy) {
                        correctChoice = 'floating';
                    } else if (weight === maxBuoyancy) {
                        correctChoice = 'suspending';
                    } else {
                        correctChoice = 'sinking';
                    }
                    
                    gameQuestions.push({
                        density: density,
                        volume: volume,
                        fluidDensity: fluidDensity,
                        correctChoice: correctChoice
                    });
                }
            }
            
            function initializeGame() {
                gameCanvas = document.getElementById('gameCanvas');
                gameCtx = gameCanvas.getContext('2d');
                
                const nextGameQuestionBtn = document.getElementById('nextGameQuestionBtn');
                const goToSelesaiBtn = document.getElementById('goToSelesaiBtn');
                const goToSelesaiFromGameBtn = document.getElementById('goToSelesaiFromGameBtn');
                
                nextGameQuestionBtn.addEventListener('click', function() {
                    currentGameQuestion++;
                    if (currentGameQuestion < gameQuestions.length) {
                        generateGameProblem();
                    } else {
                        showGameResult();
                    }
                });
                
                goToSelesaiBtn.addEventListener('click', function() {
                    // Play sound
                    playNotificationSound('Melanjutkan ke menu selesai', 'success');
                    
                    // Go to selesai page
                    showPage('selesai');
                });
                
                goToSelesaiFromGameBtn.addEventListener('click', function() {
                    // Play sound
                    playNotificationSound('Melanjutkan ke menu selesai', 'success');
                    
                    // Go to selesai page
                    showPage('selesai');
                });
                
                // Add event listeners to game choice buttons
                document.querySelectorAll('.game-choice').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const choice = this.dataset.choice;
                        checkGameAnswer(choice);
                    });
                });
                
                // Generate game questions
                generateGameQuestions();
            }
            
            function generateGameProblem() {
                // Get current question
                const question = gameQuestions[currentGameQuestion];
                
                // Update display
                document.getElementById('gameDensity').textContent = question.density;
                document.getElementById('gameVolume').textContent = question.volume.toFixed(4);
                document.getElementById('gameFluidDensity').textContent = question.fluidDensity;
                
                // Update question number
                document.querySelector('#gameSection h3').textContent = 
                    `Game: Tebak Kondisi Benda 🎯 - Pertanyaan ${currentGameQuestion + 1} dari ${gameQuestions.length}`;
                
                // Set global variables for other functions
                gameDensity = question.density;
                gameVolume = question.volume;
                gameFluidDensity = question.fluidDensity;
                gameCorrectChoice = question.correctChoice;
                
                // Draw game canvas
                drawGameCanvas();
                
                // Hide feedback
                document.getElementById('gameFeedback').classList.add('d-none');
                
                // Hide result card if visible
                document.getElementById('gameResultCard').classList.remove('show');
                
                // Enable choice buttons
                document.querySelectorAll('.game-choice').forEach(btn => {
                    btn.disabled = false;
                    btn.classList.remove('btn-success', 'btn-danger');
                    btn.classList.add('btn-outline-success', 'btn-outline-warning', 'btn-outline-danger');
                });
                
                // Update navigation buttons
                const nextBtn = document.getElementById('nextGameQuestionBtn');
                const selesaiBtn = document.getElementById('goToSelesaiBtn');
                
                if (currentGameQuestion === gameQuestions.length - 1) {
                    // Last question
                    nextBtn.style.display = 'none';
                    selesaiBtn.style.display = 'inline-flex';
                } else {
                    // Not the last question
                    nextBtn.style.display = 'inline-flex';
                    selesaiBtn.style.display = 'none';
                }
            }
            
            function drawGameCanvas() {
                // Clear canvas
                gameCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
                
                // Draw water
                gameCtx.fillStyle = '#006994';
                gameCtx.fillRect(0, 150, gameCanvas.width, gameCanvas.height - 150);
                
                // Draw water surface
                gameCtx.beginPath();
                gameCtx.moveTo(0, 150);
                for (let x = 0; x < gameCanvas.width; x += 10) {
                    const y = 150 + Math.sin(x / 30) * 3;
                    gameCtx.lineTo(x, y);
                }
                gameCtx.lineTo(gameCanvas.width, 150);
                gameCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                gameCtx.fill();
                
                // Draw object in the middle (initially)
                const objectRadius = calculateObjectRadius(gameVolume);
                const objectColor = getColorByDensity(gameDensity);
                
                gameCtx.beginPath();
                gameCtx.arc(gameCanvas.width / 2, 100, objectRadius, 0, Math.PI * 2);
                gameCtx.fillStyle = objectColor;
                gameCtx.fill();
                gameCtx.strokeStyle = '#333';
                gameCtx.lineWidth = 2;
                gameCtx.stroke();
                
                // Draw question mark
                gameCtx.fillStyle = '#fff';
                gameCtx.font = 'bold 24px Arial';
                gameCtx.textAlign = 'center';
                gameCtx.fillText('?', gameCanvas.width / 2, 108);
            }
            
            function checkGameAnswer(choice) {
                // Disable all choice buttons
                document.querySelectorAll('.game-choice').forEach(btn => {
                    btn.disabled = true;
                });
                
                const isCorrect = choice === gameCorrectChoice;
                
                // Update button styles
                document.querySelectorAll('.game-choice').forEach(btn => {
                    if (btn.dataset.choice === gameCorrectChoice) {
                        btn.classList.remove('btn-outline-success', 'btn-outline-warning', 'btn-outline-danger');
                        btn.classList.add('btn-success');
                    } else if (btn.dataset.choice === choice && !isCorrect) {
                        btn.classList.remove('btn-outline-success', 'btn-outline-warning', 'btn-outline-danger');
                        btn.classList.add('btn-danger');
                    }
                });
                
                // Update score
                if (isCorrect) {
                    gameScore += 10;
                    document.getElementById('gameScore').textContent = 'Skor: ' + gameScore;
                }
                
                // Show feedback
                const feedbackAlert = document.getElementById('gameFeedbackAlert');
                const feedbackText = document.getElementById('gameFeedbackText');
                
                if (isCorrect) {
                    feedbackAlert.className = 'alert alert-success';
                    feedbackText.innerHTML = '<strong>Benar!</strong> Benda tersebut akan ' + 
                        (gameCorrectChoice === 'floating' ? 'terapung 🚢' : 
                         gameCorrectChoice === 'suspending' ? 'melayang ⚖️' : 'tenggelam ⬇️') + 
                        ' di dalam air.';
                } else {
                    feedbackAlert.className = 'alert alert-danger';
                    feedbackText.innerHTML = '<strong>Salah!</strong> Benda tersebut akan ' + 
                        (gameCorrectChoice === 'floating' ? 'terapung 🚢' : 
                         gameCorrectChoice === 'suspending' ? 'melayang ⚖️' : 'tenggelam ⬇️') + 
                        ' di dalam air.';
                }
                
                document.getElementById('gameFeedback').classList.remove('d-none');
                
                // Draw correct state on canvas
                drawGameResult();
            }
            
            function drawGameResult() {
                // Clear canvas
                gameCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
                
                // Draw water
                gameCtx.fillStyle = '#006994';
                gameCtx.fillRect(0, 150, gameCanvas.width, gameCanvas.height - 150);
                
                // Draw water surface
                gameCtx.beginPath();
                gameCtx.moveTo(0, 150);
                for (let x = 0; x < gameCanvas.width; x += 10) {
                    const y = 150 + Math.sin(x / 30) * 3;
                    gameCtx.lineTo(x, y);
                }
                gameCtx.lineTo(gameCanvas.width, 150);
                gameCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                gameCtx.fill();
                
                // Calculate position based on state
                let objectY;
                const objectRadius = calculateObjectRadius(gameVolume);
                
                if (gameCorrectChoice === 'floating') {
                    const weight = gameDensity * gameVolume * 9.8;
                    const maxBuoyancy = gameFluidDensity * gameVolume * 9.8;
                    const submergedRatio = weight / maxBuoyancy;
                    objectY = 150 - (objectRadius * (1 - submergedRatio));
                } else if (gameCorrectChoice === 'suspending') {
                    objectY = 150;
                } else {
                    objectY = 300 - objectRadius;
                }
                
                // Draw object
                const objectColor = getColorByDensity(gameDensity);
                
                gameCtx.beginPath();
                gameCtx.arc(gameCanvas.width / 2, objectY, objectRadius, 0, Math.PI * 2);
                gameCtx.fillStyle = objectColor;
                gameCtx.fill();
                gameCtx.strokeStyle = '#333';
                gameCtx.lineWidth = 2;
                gameCtx.stroke();
                
                // Draw state icon
                gameCtx.fillStyle = '#fff';
                gameCtx.font = 'bold 20px Arial';
                gameCtx.textAlign = 'center';
                
                if (gameCorrectChoice === 'floating') {
                    gameCtx.fillText('↑', gameCanvas.width / 2, objectY + 7);
                } else if (gameCorrectChoice === 'suspending') {
                    gameCtx.fillText('—', gameCanvas.width / 2, objectY + 7);
                } else {
                    gameCtx.fillText('↓', gameCanvas.width / 2, objectY + 7);
                }
            }
            
            function showGameResult() {
                // Hide game content
                document.getElementById('gameParameters').parentElement.style.display = 'none';
                document.querySelector('#gameSection .d-grid').style.display = 'none';
                document.getElementById('gameCanvas').parentElement.style.display = 'none';
                document.getElementById('gameFeedback').style.display = 'none';
                document.querySelector('.game-navigation').style.display = 'none';
                
                // Show result card
                document.getElementById('gameResultCard').classList.add('show');
                document.getElementById('finalGameScore').textContent = gameScore;
                
                let message = '';
                if (gameScore >= 80) {
                    message = 'Luar biasa! Kamu telah menguasai konsep Hukum Archimedes dengan sangat baik!';
                } else if (gameScore >= 60) {
                    message = 'Bagus! Kamu sudah memahami konsep dasar Hukum Archimedes.';
                } else if (gameScore >= 40) {
                    message = 'Cukup baik, tapi masih perlu mempelajari lebih lanjut tentang Hukum Archimedes.';
                } else {
                    message = 'Kamu perlu mempelajari kembali materi Hukum Archimedes.';
                }
                
                document.getElementById('gameResultMessage').textContent = message;
                
                // Play sound
                playNotificationSound('Game selesai! Skor kamu: ' + gameScore, 'success');
            }
            
            // Teacher Dashboard Functions
            function initializeTeacherDashboard() {
                // Initialize event listeners for teacher dashboard
                const exportCsvBtn = document.getElementById('exportCsvBtn');
                const exportJsonBtn = document.getElementById('exportJsonBtn');
                const filterBtn = document.getElementById('filterBtn');
                const resetFilterBtn = document.getElementById('resetFilterBtn');
                const filterInput = document.getElementById('filterInput');
                
                if (exportCsvBtn) {
                    exportCsvBtn.addEventListener('click', exportToCSV);
                }
                
                if (exportJsonBtn) {
                    exportJsonBtn.addEventListener('click', exportToJSON);
                }
                
                if (filterBtn) {
                    filterBtn.addEventListener('click', filterStudents);
                }
                
                if (resetFilterBtn) {
                    resetFilterBtn.addEventListener('click', resetFilter);
                }
                
                if (filterInput) {
                    filterInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            filterStudents();
                        }
                    });
                }
            }
            
            function loadTeacherDashboard() {
                // Load student answers from localStorage
                const allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                
                // Update statistics
                updateDashboardStats(allConclusions);
                
                // Display student answers table
                displayStudentAnswersTable(allConclusions);
            }
            
            function updateDashboardStats(allConclusions) {
                const totalStudents = allConclusions.length;
                const completedStudents = allConclusions.filter(c => c.conclusion && c.conclusion.trim() !== '').length;
                
                // Calculate average score (mock data for demonstration)
                const averageScore = totalStudents > 0 ? Math.floor(Math.random() * 30) + 60 : 0;
                
                document.getElementById('totalStudents').textContent = totalStudents;
                document.getElementById('completedStudents').textContent = completedStudents;
                document.getElementById('averageScore').textContent = averageScore;
            }
            
            function displayStudentAnswersTable(allConclusions) {
                const container = document.getElementById('studentAnswersTableContainer');
                
                if (allConclusions.length === 0) {
                    container.innerHTML = `
                        <div class="no-data-message">
                            <i class="bi bi-inbox"></i>
                            <p>Belum ada jawaban siswa yang tersimpan</p>
                        </div>
                    `;
                    return;
                }
                
                let tableHTML = `
                    <table class="student-answers-table">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama Siswa</th>
                                <th>Tanggal</th>
                                <th>Waktu</th>
                                <th>Kesimpulan</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                allConclusions.forEach((student, index) => {
                    const date = new Date(student.timestamp);
                    const formattedDate = date.toLocaleDateString('id-ID');
                    const formattedTime = date.toLocaleTimeString('id-ID');
                    
                    // Truncate conclusion if too long
                    const conclusionPreview = student.conclusion.length > 100 
                        ? student.conclusion.substring(0, 100) + '...' 
                        : student.conclusion;
                    
                    tableHTML += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>${student.username}</td>
                            <td>${formattedDate}</td>
                            <td>${formattedTime}</td>
                            <td class="answer-preview" title="${student.conclusion}">${conclusionPreview}</td>
                        </tr>
                    `;
                });
                
                tableHTML += `
                        </tbody>
                    </table>
                `;
                
                container.innerHTML = tableHTML;
            }
            
            function filterStudents() {
                const filterValue = document.getElementById('filterInput').value.toLowerCase().trim();
                const allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                
                if (filterValue === '') {
                    displayStudentAnswersTable(allConclusions);
                    return;
                }
                
                const filteredConclusions = allConclusions.filter(student => 
                    student.username.toLowerCase().includes(filterValue)
                );
                
                displayStudentAnswersTable(filteredConclusions);
            }
            
            function resetFilter() {
                document.getElementById('filterInput').value = '';
                const allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                displayStudentAnswersTable(allConclusions);
            }
            
            function exportToCSV() {
                const allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                
                if (allConclusions.length === 0) {
                    showNotification('Tidak ada data untuk diekspor');
                    return;
                }
                
                let csvContent = 'No,Nama Siswa,Tanggal,Waktu,Kesimpulan\n';
                
                allConclusions.forEach((student, index) => {
                    const date = new Date(student.timestamp);
                    const formattedDate = date.toLocaleDateString('id-ID');
                    const formattedTime = date.toLocaleTimeString('id-ID');
                    
                    // Clean conclusion for CSV (remove newlines and quotes)
                    const cleanConclusion = student.conclusion.replace(/"/g, ' ').replace(/"/g, '""');
                    
                    csvContent += `${index + 1},"${student.username}","${formattedDate}","${formattedTime}","${cleanConclusion}"\n`;
                });
                
                // Create and download CSV file
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', `jawaban_siswa_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Data berhasil diekspor ke CSV');
                playNotificationSound('Data berhasil diekspor', 'success');
            }
            
            function exportToJSON() {
                const allConclusions = JSON.parse(localStorage.getItem('studentConclusions') || '[]');
                
                if (allConclusions.length === 0) {
                    showNotification('Tidak ada data untuk diekspor');
                    return;
                }
                
                // Create and download JSON file
                const blob = new Blob([JSON.stringify(allConclusions, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', `jawaban_siswa_${new Date().toISOString().split('T')[0]}.json`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Data berhasil diekspor ke JSON');
                playNotificationSound('Data berhasil diekspor', 'success');
            }
        });
    </script>
</body>
</html>